<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: selector.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: selector.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/** @module selector 
 * @description Helper for focusing and selecting objects
 */

import SelectorMeta from './models/SelectorMeta';
import ShelfObject from './models/ShelfObject';
import BookObject from './models/BookObject';
import SectionObject from './models/SectionObject';

import * as environment from './environment';
import * as preview from './preview';
import highlight from './highlight';

var selected = new SelectorMeta();
var focused = new SelectorMeta();

export var placing = false;

/**
 * @returns {String} id of selected object
 */
export function getSelectedId() {
	return selected.id;
}

/** Focus object
 * @param {lib3d.SelectorMeta} meta - object to focus
 */
export function focus(meta) {
	var obj;

	if(!meta.equals(focused)) {
		focused = meta;

		if(!focused.isEmpty()) {
			obj = getFocusedObject();
			highlight.focus(obj);
		}
	}
}

/**
 * Make current focused object to be selected
 */
export function selectFocused() {
	select(focused);
}

/** Select object
 * @param {lib3d.SelectorMeta} meta - object to select
 */
export function select(meta) {
	var obj = getObject(meta);
	
	unselect();
	selected = meta;

	highlight.select(obj);
	highlight.focus(null);

	placing = false;
}

/**
 * Unselect current sellected object
 */
export function unselect() {
	if(!selected.isEmpty()) {
		highlight.select(null);
		selected = new SelectorMeta();
	}

	preview.disable();
}

/**
 * @returns {lib3d.BaseObject} Selected object
 */
export function getSelectedObject() {
	return getObject(selected);
}

/**
 * @returns {lib3d.BaseObject} Focused object
 */
export function getFocusedObject() {
	return getObject(focused);
}

function getObject(meta) {
	var object;

	if(!meta.isEmpty()) {
		object = isShelf(meta) ? environment.getShelf(meta.parentId, meta.id)
			: isBook(meta) ? environment.getBook(meta.id)
			: isSection(meta) ? environment.getSection(meta.id)
			: null;
	}

	return object;	
}

/**
 * @returns {Boolean} Is selected object can be edited
 */
export function isSelectedEditable() {
	return isSelectedBook() || isSelectedSection();
}

/**
 * @param {String} id - Book id
 * @returns {Boolean} True if selected object is book with given id
 */
export function isBookSelected(id) {
	return isBook(selected) &amp;&amp; selected.id === id;
}

/**
 * @returns {Boolean} Is shelf selected
 */
export function isSelectedShelf() {
	return isShelf(selected);
}

/**
 * @returns {Boolean} Is book selected
 */
export function isSelectedBook() {
	return isBook(selected);
}

/**
 * @returns {Boolean} Is section selected
 */
export function isSelectedSection() {
	return isSection(selected);
}

function isShelf(meta) {
	return meta.type === ShelfObject.TYPE;
}

function isBook(meta) {
	return meta.type === BookObject.TYPE;
}

function isSection(meta) {
	return meta.type === SectionObject.TYPE;
}</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-camera.html">camera</a></li><li><a href="module-lib3d.html">lib3d</a></li><li><a href="module-locator.html">locator</a></li><li><a href="module-mouse.html">mouse</a></li><li><a href="module-navigation.html">navigation</a></li><li><a href="module-preview.html">preview</a></li><li><a href="module-selector.html">selector</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.0</a> on Mon Jan 25 2016 17:22:17 GMT+0300 (Belarus Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
