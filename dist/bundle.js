!function(n,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("three")):"function"==typeof define&&define.amd?define(["three"],e):"object"==typeof exports?exports.lib3d=e(require("three")):n.lib3d=e(n.three)}(this,function(n){return function(n){function e(r){if(t[r])return t[r].exports;var o=t[r]={exports:{},id:r,loaded:!1};return n[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var t={};return e.m=n,e.c=t,e.p="/dist",e(0)}([/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/
function(n,e,t){"use strict";function r(n){return n&&n.__esModule?n:{"default":n}}function o(n,t,r){e.renderer=P=new m["default"].WebGLRenderer({canvas:n||void 0,antialias:!0}),P.setSize(t,r),S["default"].scene=new m["default"].Scene,S["default"].scene.fog=new m["default"].Fog(0,4,7),a()}function i(n){x.push(n)}function u(n){return S["default"].loadLibrary(n)}function a(){requestAnimationFrame(a),P.render(S["default"].scene,w["default"].camera),x.forEach(function(n){return n()})}Object.defineProperty(e,"__esModule",{value:!0}),e.environment=e.camera=e.renderer=e.SelectorMetaDto=e.SelectorMeta=e.SectionObject=e.BookObject=e.ShelfObject=e.navigation=e.selector=e.preview=e.mouse=e.locator=void 0;var f=t(1);Object.defineProperty(e,"locator",{enumerable:!0,get:function(){return f.locator}});var c=t(19);Object.defineProperty(e,"mouse",{enumerable:!0,get:function(){return c.mouse}});var l=t(20);Object.defineProperty(e,"preview",{enumerable:!0,get:function(){return l.preview}});var s=t(23);Object.defineProperty(e,"selector",{enumerable:!0,get:function(){return s.selector}});var p=t(25);Object.defineProperty(e,"navigation",{enumerable:!0,get:function(){return p.navigation}});var d=t(16);Object.defineProperty(e,"ShelfObject",{enumerable:!0,get:function(){return d["default"]}});var h=t(14);Object.defineProperty(e,"BookObject",{enumerable:!0,get:function(){return h["default"]}});var v=t(15);Object.defineProperty(e,"SectionObject",{enumerable:!0,get:function(){return v["default"]}});var g=t(24);Object.defineProperty(e,"SelectorMeta",{enumerable:!0,get:function(){return g["default"]}});var _=t(26);Object.defineProperty(e,"SelectorMetaDto",{enumerable:!0,get:function(){return _["default"]}}),e.init=o,e.addLoop=i,e.load=u;var y=t(2),m=r(y),b=t(17),w=r(b),A=t(9),S=r(A),x=[],P=e.renderer=void 0;e.camera=w["default"],e.environment=S["default"]},/*!************************!*\
  !*** ./src/locator.js ***!
  \************************/
function(n,e,t){"use strict";function r(n){if(n&&n.__esModule)return n;var e={};if(null!=n)for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e["default"]=n,e}function o(n){return n&&n.__esModule?n:{"default":n}}function i(n,e,t){var r=new v["default"].Vector3(t.max.x-t.min.x+.01,0,t.max.z-t.min.z+.01),o=l(n,r),i=a(o,e,t,r);return E&&d(i,r,P["default"].library),i}function u(n,e,t,r){var o,i,u=1.3,a={},c={},l=m["default"].getEdges(e,r);for(i=l.minZCell;i<=l.maxZCell;i++)for(o=l.minXCell;o<=l.maxXCell;o++)if((!n[i]||!n[i][o])&&(a.pos=f([o],i,r,e,t),a.length=a.pos.length(),(!c.pos||a.length<c.length)&&(c.pos=a.pos,c.length=a.length),c.pos&&c.length<u))return c.pos;return c.pos}function a(n,e,t,r){var o,i,u,a,c=1,l=0,s=m["default"].getEdges(e,r);for(u=s.minZCell;u<=s.maxZCell;u++)for(i=s.minXCell;i<=s.maxXCell;i++)if(n[u]&&n[u][i])l=0;else if(o=o||i,l++,l===c)return a=_["default"].range(o,o+l),f(a,u,r,e,t);return null}function f(n,e,t,r,o){var i=m["default"].cellToPos(new v["default"].Vector3(n[0],0,e),t),u=new v["default"].Vector3;return u.addVectors(o.min,o.max),u.multiplyScalar(-.5),i.add(u).setY(c(r,o))}function c(n,e){return n.min.y-e.min.y+P["default"].CLEARANCE}function l(n,e,t){var r,o,i,u,a,f,c,l={};return n.forEach(function(n){if(n instanceof w["default"]&&n!==t)for(r=n.boundingBox,o=Math.round((r.center.x-r.radius.x)/e.x),i=Math.round((r.center.x+r.radius.x)/e.x),u=Math.round((r.center.z-r.radius.z)/e.z),a=Math.round((r.center.z+r.radius.z)/e.z),f=u;a>=f;f++){l[f]=l[f]||{};var d=[];for(c=o;i>=c;c++)l[f][c]=!0,d.push(c);E&&(s(n),p(d,e,n,f))}}),l}function s(n){var e=n.boundingBox,t=new v["default"].Mesh(new v["default"].BoxGeometry(2*e.radius.x,2*e.radius.y+.1,2*e.radius.z),new v["default"].MeshLambertMaterial({color:12303359,opacity:.2,transparent:!0}));t.position.x=e.center.x,t.position.y=e.center.y,t.position.z=e.center.z,n.parent.add(t)}function p(n,e,t,r){n.forEach(function(n){var o=f([n],r,e,t.parent.geometry.boundingBox,t.geometry.boundingBox),i=new v["default"].Mesh(new v["default"].BoxGeometry(e.x-.01,.01,e.z-.01),new v["default"].MeshLambertMaterial({color:16711680}));i.position.set(o.x,o.y,o.z),t.parent.add(i)})}function d(n,e,t){if(n){var r=new v["default"].Mesh(new v["default"].BoxGeometry(e.x,.5,e.z),new v["default"].MeshLambertMaterial({color:65280}));r.position.set(n.x,n.y,n.z),t.parent.add(r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.locator=void 0;var h=t(2),v=o(h),g=t(3),_=o(g),y=t(5),m=o(y),b=t(6),w=o(b),A=t(7),S=r(A),x=t(9),P=o(x),O=e.locator={},E=!1;O.centerObject=function(n){var e=n.geometry.boundingBox,t=P["default"].library.geometry.boundingBox,r=new v["default"].Vector3(e.max.x-e.min.x+.01,0,e.max.z-e.min.z+.01),o=l(P["default"].library.children,r,n),i=u(o,t,e,r);n.position.setX(i.x),n.position.setZ(i.z)},O.placeSection=function(n){return S.getSection(n.model).then(function(n){var e=n.geometry.boundingBox,t=P["default"].library.geometry.boundingBox,r=i(P["default"].library.children,t,e);return r?Promise.resolve(r):Promise.reject("there is no free space")})},O.placeBook=function(n,e){return S.getBook(n.model).then(function(n){var t=e.geometry.boundingBox,r=n.geometry.boundingBox,o=i(e.children,t,r);return o?Promise.resolve(o):Promise.reject("there is no free space")})},O.debug=function(){S.getSection("bookshelf_0001").then(function(n){E=!0;var e=n.geometry.boundingBox,t=P["default"].library.geometry.boundingBox;i(P["default"].library.children,t,e),E=!1})}},/*!************************!*\
  !*** external "three" ***!
  \************************/
function(e,t){e.exports=n},/*!***************************!*\
  !*** ./~/lodash/index.js ***!
  \***************************/
function(n,e,t){var r;(function(n,o){(function(){function i(n,e){if(n!==e){var t=null===n,r=n===E,o=n===n,i=null===e,u=e===E,a=e===e;if(n>e&&!i||!o||t&&!u&&a||r&&a)return 1;if(e>n&&!t||!a||i&&!r&&o||u&&o)return-1}return 0}function u(n,e,t){for(var r=n.length,o=t?r:-1;t?o--:++o<r;)if(e(n[o],o,n))return o;return-1}function a(n,e,t){if(e!==e)return y(n,t);for(var r=t-1,o=n.length;++r<o;)if(n[r]===e)return r;return-1}function f(n){return"function"==typeof n||!1}function c(n){return null==n?"":n+""}function l(n,e){for(var t=-1,r=n.length;++t<r&&e.indexOf(n.charAt(t))>-1;);return t}function s(n,e){for(var t=n.length;t--&&e.indexOf(n.charAt(t))>-1;);return t}function p(n,e){return i(n.criteria,e.criteria)||n.index-e.index}function d(n,e,t){for(var r=-1,o=n.criteria,u=e.criteria,a=o.length,f=t.length;++r<a;){var c=i(o[r],u[r]);if(c){if(r>=f)return c;var l=t[r];return c*("asc"===l||l===!0?1:-1)}}return n.index-e.index}function h(n){return Zn[n]}function v(n){return Jn[n]}function g(n,e,t){return e?n=Kn[n]:t&&(n=qn[n]),"\\"+n}function _(n){return"\\"+qn[n]}function y(n,e,t){for(var r=n.length,o=e+(t?0:-1);t?o--:++o<r;){var i=n[o];if(i!==i)return o}return-1}function m(n){return!!n&&"object"==typeof n}function b(n){return 160>=n&&n>=9&&13>=n||32==n||160==n||5760==n||6158==n||n>=8192&&(8202>=n||8232==n||8233==n||8239==n||8287==n||12288==n||65279==n)}function w(n,e){for(var t=-1,r=n.length,o=-1,i=[];++t<r;)n[t]===e&&(n[t]=F,i[++o]=t);return i}function A(n,e){for(var t,r=-1,o=n.length,i=-1,u=[];++r<o;){var a=n[r],f=e?e(a,r,n):a;r&&t===f||(t=f,u[++i]=a)}return u}function S(n){for(var e=-1,t=n.length;++e<t&&b(n.charCodeAt(e)););return e}function x(n){for(var e=n.length;e--&&b(n.charCodeAt(e)););return e}function P(n){return Qn[n]}function O(n){function e(n){if(m(n)&&!ja(n)&&!(n instanceof o)){if(n instanceof r)return n;if(eu.call(n,"__chain__")&&eu.call(n,"__wrapped__"))return dr(n)}return new r(n)}function t(){}function r(n,e,t){this.__wrapped__=n,this.__actions__=t||[],this.__chain__=!!e}function o(n){this.__wrapped__=n,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Mu,this.__views__=[]}function b(){var n=new o(this.__wrapped__);return n.__actions__=ee(this.__actions__),n.__dir__=this.__dir__,n.__filtered__=this.__filtered__,n.__iteratees__=ee(this.__iteratees__),n.__takeCount__=this.__takeCount__,n.__views__=ee(this.__views__),n}function $(){if(this.__filtered__){var n=new o(this);n.__dir__=-1,n.__filtered__=!0}else n=this.clone(),n.__dir__*=-1;return n}function rn(){var n=this.__wrapped__.value(),e=this.__dir__,t=ja(n),r=0>e,o=t?n.length:0,i=Ft(0,o,this.__views__),u=i.start,a=i.end,f=a-u,c=r?a:u-1,l=this.__iteratees__,s=l.length,p=0,d=Su(f,this.__takeCount__);if(!t||z>o||o==f&&d==f)return rt(r&&t?n.reverse():n,this.__actions__);var h=[];n:for(;f--&&d>p;){c+=e;for(var v=-1,g=n[c];++v<s;){var _=l[v],y=_.iteratee,m=_.type,b=y(g);if(m==W)g=b;else if(!b){if(m==X)continue n;break n}}h[p++]=g}return h}function un(){this.__data__={}}function Zn(n){return this.has(n)&&delete this.__data__[n]}function Jn(n){return"__proto__"==n?E:this.__data__[n]}function Qn(n){return"__proto__"!=n&&eu.call(this.__data__,n)}function Yn(n,e){return"__proto__"!=n&&(this.__data__[n]=e),this}function Kn(n){var e=n?n.length:0;for(this.data={hash:_u(null),set:new su};e--;)this.push(n[e])}function qn(n,e){var t=n.data,r="string"==typeof e||Lo(e)?t.set.has(e):t.hash[e];return r?0:-1}function $n(n){var e=this.data;"string"==typeof n||Lo(n)?e.set.add(n):e.hash[n]=!0}function ne(n,e){for(var t=-1,r=n.length,o=-1,i=e.length,u=Ni(r+i);++t<r;)u[t]=n[t];for(;++o<i;)u[t++]=e[o];return u}function ee(n,e){var t=-1,r=n.length;for(e||(e=Ni(r));++t<r;)e[t]=n[t];return e}function te(n,e){for(var t=-1,r=n.length;++t<r&&e(n[t],t,n)!==!1;);return n}function re(n,e){for(var t=n.length;t--&&e(n[t],t,n)!==!1;);return n}function ue(n,e){for(var t=-1,r=n.length;++t<r;)if(!e(n[t],t,n))return!1;return!0}function ae(n,e,t,r){for(var o=-1,i=n.length,u=r,a=u;++o<i;){var f=n[o],c=+e(f);t(c,u)&&(u=c,a=f)}return a}function fe(n,e){for(var t=-1,r=n.length,o=-1,i=[];++t<r;){var u=n[t];e(u,t,n)&&(i[++o]=u)}return i}function ce(n,e){for(var t=-1,r=n.length,o=Ni(r);++t<r;)o[t]=e(n[t],t,n);return o}function le(n,e){for(var t=-1,r=e.length,o=n.length;++t<r;)n[o+t]=e[t];return n}function se(n,e,t,r){var o=-1,i=n.length;for(r&&i&&(t=n[++o]);++o<i;)t=e(t,n[o],o,n);return t}function pe(n,e,t,r){var o=n.length;for(r&&o&&(t=n[--o]);o--;)t=e(t,n[o],o,n);return t}function de(n,e){for(var t=-1,r=n.length;++t<r;)if(e(n[t],t,n))return!0;return!1}function he(n,e){for(var t=n.length,r=0;t--;)r+=+e(n[t])||0;return r}function ve(n,e){return n===E?e:n}function ge(n,e,t,r){return n!==E&&eu.call(r,t)?n:e}function _e(n,e,t){for(var r=-1,o=Ua(e),i=o.length;++r<i;){var u=o[r],a=n[u],f=t(a,e[u],u,n,e);(f===f?f===a:a!==a)&&(a!==E||u in n)||(n[u]=f)}return n}function ye(n,e){return null==e?n:be(e,Ua(e),n)}function me(n,e){for(var t=-1,r=null==n,o=!r&&Kt(n),i=o?n.length:0,u=e.length,a=Ni(u);++t<u;){var f=e[t];o?a[t]=qt(f,i)?n[f]:E:a[t]=r?E:n[f]}return a}function be(n,e,t){t||(t={});for(var r=-1,o=e.length;++r<o;){var i=e[r];t[i]=n[i]}return t}function we(n,e,t){var r=typeof n;return"function"==r?e===E?n:ut(n,e,t):null==n?Mi:"object"==r?Ue(n):e===E?Ti(n):Ne(n,e)}function Ae(n,e,t,r,o,i,u){var a;if(t&&(a=o?t(n,r,o):t(n)),a!==E)return a;if(!Lo(n))return n;var f=ja(n);if(f){if(a=Zt(n),!e)return ee(n,a)}else{var c=ru.call(n),l=c==q;if(c!=en&&c!=Z&&(!l||o))return Fn[c]?Qt(n,c,e):o?n:{};if(a=Jt(l?{}:n),!e)return ye(a,n)}i||(i=[]),u||(u=[]);for(var s=i.length;s--;)if(i[s]==n)return u[s];return i.push(n),u.push(a),(f?te:De)(n,function(r,o){a[o]=Ae(r,e,t,o,n,i,u)}),a}function Se(n,e,t){if("function"!=typeof n)throw new Yi(V);return pu(function(){n.apply(E,t)},e)}function xe(n,e){var t=n?n.length:0,r=[];if(!t)return r;var o=-1,i=Xt(),u=i==a,f=u&&e.length>=z?vt(e):null,c=e.length;f&&(i=qn,u=!1,e=f);n:for(;++o<t;){var l=n[o];if(u&&l===l){for(var s=c;s--;)if(e[s]===l)continue n;r.push(l)}else i(e,l,0)<0&&r.push(l)}return r}function Pe(n,e){var t=!0;return ku(n,function(n,r,o){return t=!!e(n,r,o)}),t}function Oe(n,e,t,r){var o=r,i=o;return ku(n,function(n,u,a){var f=+e(n,u,a);(t(f,o)||f===r&&f===i)&&(o=f,i=n)}),i}function Ee(n,e,t,r){var o=n.length;for(t=null==t?0:+t||0,0>t&&(t=-t>o?0:o+t),r=r===E||r>o?o:+r||0,0>r&&(r+=o),o=t>r?0:r>>>0,t>>>=0;o>t;)n[t++]=e;return n}function Me(n,e){var t=[];return ku(n,function(n,r,o){e(n,r,o)&&t.push(n)}),t}function je(n,e,t,r){var o;return t(n,function(n,t,i){return e(n,t,i)?(o=r?t:n,!1):void 0}),o}function Ie(n,e,t,r){r||(r=[]);for(var o=-1,i=n.length;++o<i;){var u=n[o];m(u)&&Kt(u)&&(t||ja(u)||Oo(u))?e?Ie(u,e,t,r):le(r,u):t||(r[r.length]=u)}return r}function Be(n,e){return Hu(n,e,ei)}function De(n,e){return Hu(n,e,Ua)}function Ce(n,e){return Ru(n,e,Ua)}function Te(n,e){for(var t=-1,r=e.length,o=-1,i=[];++t<r;){var u=e[t];To(n[u])&&(i[++o]=u)}return i}function Le(n,e,t){if(null!=n){t!==E&&t in sr(n)&&(e=[t]);for(var r=0,o=e.length;null!=n&&o>r;)n=n[e[r++]];return r&&r==o?n:E}}function ke(n,e,t,r,o,i){return n===e?!0:null==n||null==e||!Lo(n)&&!m(e)?n!==n&&e!==e:Ge(n,e,ke,t,r,o,i)}function Ge(n,e,t,r,o,i,u){var a=ja(n),f=ja(e),c=J,l=J;a||(c=ru.call(n),c==Z?c=en:c!=en&&(a=Wo(n))),f||(l=ru.call(e),l==Z?l=en:l!=en&&(f=Wo(e)));var s=c==en,p=l==en,d=c==l;if(d&&!a&&!s)return Rt(n,e,c);if(!o){var h=s&&eu.call(n,"__wrapped__"),v=p&&eu.call(e,"__wrapped__");if(h||v)return t(h?n.value():n,v?e.value():e,r,o,i,u)}if(!d)return!1;i||(i=[]),u||(u=[]);for(var g=i.length;g--;)if(i[g]==n)return u[g]==e;i.push(n),u.push(e);var _=(a?Ht:Ut)(n,e,t,r,o,i,u);return i.pop(),u.pop(),_}function He(n,e,t){var r=e.length,o=r,i=!t;if(null==n)return!o;for(n=sr(n);r--;){var u=e[r];if(i&&u[2]?u[1]!==n[u[0]]:!(u[0]in n))return!1}for(;++r<o;){u=e[r];var a=u[0],f=n[a],c=u[1];if(i&&u[2]){if(f===E&&!(a in n))return!1}else{var l=t?t(f,c,a):E;if(!(l===E?ke(c,f,t,!0):l))return!1}}return!0}function Re(n,e){var t=-1,r=Kt(n)?Ni(n.length):[];return ku(n,function(n,o,i){r[++t]=e(n,o,i)}),r}function Ue(n){var e=Wt(n);if(1==e.length&&e[0][2]){var t=e[0][0],r=e[0][1];return function(n){return null==n?!1:n[t]===r&&(r!==E||t in sr(n))}}return function(n){return He(n,e)}}function Ne(n,e){var t=ja(n),r=nr(n)&&rr(e),o=n+"";return n=pr(n),function(i){if(null==i)return!1;var u=o;if(i=sr(i),(t||!r)&&!(u in i)){if(i=1==n.length?i:Le(i,Qe(n,0,-1)),null==i)return!1;u=Or(n),i=sr(i)}return i[u]===e?e!==E||u in i:ke(e,i[u],E,!0)}}function ze(n,e,t,r,o){if(!Lo(n))return n;var i=Kt(e)&&(ja(e)||Wo(e)),u=i?E:Ua(e);return te(u||e,function(a,f){if(u&&(f=a,a=e[f]),m(a))r||(r=[]),o||(o=[]),Xe(n,e,f,ze,t,r,o);else{var c=n[f],l=t?t(c,a,f,n,e):E,s=l===E;s&&(l=a),l===E&&(!i||f in n)||!s&&(l===l?l===c:c!==c)||(n[f]=l)}}),n}function Xe(n,e,t,r,o,i,u){for(var a=i.length,f=e[t];a--;)if(i[a]==f)return void(n[t]=u[a]);var c=n[t],l=o?o(c,f,t,n,e):E,s=l===E;s&&(l=f,Kt(f)&&(ja(f)||Wo(f))?l=ja(c)?c:Kt(c)?ee(c):[]:No(f)||Oo(f)?l=Oo(c)?Qo(c):No(c)?c:{}:s=!1),i.push(f),u.push(l),s?n[t]=r(l,f,o,i,u):(l===l?l!==c:c===c)&&(n[t]=l)}function We(n){return function(e){return null==e?E:e[n]}}function Ve(n){var e=n+"";return n=pr(n),function(t){return Le(t,n,e)}}function Fe(n,e){for(var t=n?e.length:0;t--;){var r=e[t];if(r!=o&&qt(r)){var o=r;du.call(n,r,1)}}return n}function Ze(n,e){return n+yu(Ou()*(e-n+1))}function Je(n,e,t,r,o){return o(n,function(n,o,i){t=r?(r=!1,n):e(t,n,o,i)}),t}function Qe(n,e,t){var r=-1,o=n.length;e=null==e?0:+e||0,0>e&&(e=-e>o?0:o+e),t=t===E||t>o?o:+t||0,0>t&&(t+=o),o=e>t?0:t-e>>>0,e>>>=0;for(var i=Ni(o);++r<o;)i[r]=n[r+e];return i}function Ye(n,e){var t;return ku(n,function(n,r,o){return t=e(n,r,o),!t}),!!t}function Ke(n,e){var t=n.length;for(n.sort(e);t--;)n[t]=n[t].value;return n}function qe(n,e,t){var r=Nt(),o=-1;e=ce(e,function(n){return r(n)});var i=Re(n,function(n){var t=ce(e,function(e){return e(n)});return{criteria:t,index:++o,value:n}});return Ke(i,function(n,e){return d(n,e,t)})}function $e(n,e){var t=0;return ku(n,function(n,r,o){t+=+e(n,r,o)||0}),t}function nt(n,e){var t=-1,r=Xt(),o=n.length,i=r==a,u=i&&o>=z,f=u?vt():null,c=[];f?(r=qn,i=!1):(u=!1,f=e?[]:c);n:for(;++t<o;){var l=n[t],s=e?e(l,t,n):l;if(i&&l===l){for(var p=f.length;p--;)if(f[p]===s)continue n;e&&f.push(s),c.push(l)}else r(f,s,0)<0&&((e||u)&&f.push(s),c.push(l))}return c}function et(n,e){for(var t=-1,r=e.length,o=Ni(r);++t<r;)o[t]=n[e[t]];return o}function tt(n,e,t,r){for(var o=n.length,i=r?o:-1;(r?i--:++i<o)&&e(n[i],i,n););return t?Qe(n,r?0:i,r?i+1:o):Qe(n,r?i+1:0,r?o:i)}function rt(n,e){var t=n;t instanceof o&&(t=t.value());for(var r=-1,i=e.length;++r<i;){var u=e[r];t=u.func.apply(u.thisArg,le([t],u.args))}return t}function ot(n,e,t){var r=0,o=n?n.length:r;if("number"==typeof e&&e===e&&Bu>=o){for(;o>r;){var i=r+o>>>1,u=n[i];(t?e>=u:e>u)&&null!==u?r=i+1:o=i}return o}return it(n,e,Mi,t)}function it(n,e,t,r){e=t(e);for(var o=0,i=n?n.length:0,u=e!==e,a=null===e,f=e===E;i>o;){var c=yu((o+i)/2),l=t(n[c]),s=l!==E,p=l===l;if(u)var d=p||r;else d=a?p&&s&&(r||null!=l):f?p&&(r||s):null==l?!1:r?e>=l:e>l;d?o=c+1:i=c}return Su(i,Iu)}function ut(n,e,t){if("function"!=typeof n)return Mi;if(e===E)return n;switch(t){case 1:return function(t){return n.call(e,t)};case 3:return function(t,r,o){return n.call(e,t,r,o)};case 4:return function(t,r,o,i){return n.call(e,t,r,o,i)};case 5:return function(t,r,o,i,u){return n.call(e,t,r,o,i,u)}}return function(){return n.apply(e,arguments)}}function at(n){var e=new uu(n.byteLength),t=new hu(e);return t.set(new hu(n)),e}function ft(n,e,t){for(var r=t.length,o=-1,i=Au(n.length-r,0),u=-1,a=e.length,f=Ni(a+i);++u<a;)f[u]=e[u];for(;++o<r;)f[t[o]]=n[o];for(;i--;)f[u++]=n[o++];return f}function ct(n,e,t){for(var r=-1,o=t.length,i=-1,u=Au(n.length-o,0),a=-1,f=e.length,c=Ni(u+f);++i<u;)c[i]=n[i];for(var l=i;++a<f;)c[l+a]=e[a];for(;++r<o;)c[l+t[r]]=n[i++];return c}function lt(n,e){return function(t,r,o){var i=e?e():{};if(r=Nt(r,o,3),ja(t))for(var u=-1,a=t.length;++u<a;){var f=t[u];n(i,f,r(f,u,t),t)}else ku(t,function(e,t,o){n(i,e,r(e,t,o),o)});return i}}function st(n){return yo(function(e,t){var r=-1,o=null==e?0:t.length,i=o>2?t[o-2]:E,u=o>2?t[2]:E,a=o>1?t[o-1]:E;for("function"==typeof i?(i=ut(i,a,5),o-=2):(i="function"==typeof a?a:E,o-=i?1:0),u&&$t(t[0],t[1],u)&&(i=3>o?E:i,o=1);++r<o;){var f=t[r];f&&n(e,f,i)}return e})}function pt(n,e){return function(t,r){var o=t?zu(t):0;if(!tr(o))return n(t,r);for(var i=e?o:-1,u=sr(t);(e?i--:++i<o)&&r(u[i],i,u)!==!1;);return t}}function dt(n){return function(e,t,r){for(var o=sr(e),i=r(e),u=i.length,a=n?u:-1;n?a--:++a<u;){var f=i[a];if(t(o[f],f,o)===!1)break}return e}}function ht(n,e){function t(){var o=this&&this!==oe&&this instanceof t?r:n;return o.apply(e,arguments)}var r=_t(n);return t}function vt(n){return _u&&su?new Kn(n):null}function gt(n){return function(e){for(var t=-1,r=Pi(si(e)),o=r.length,i="";++t<o;)i=n(i,r[t],t);return i}}function _t(n){return function(){var e=arguments;switch(e.length){case 0:return new n;case 1:return new n(e[0]);case 2:return new n(e[0],e[1]);case 3:return new n(e[0],e[1],e[2]);case 4:return new n(e[0],e[1],e[2],e[3]);case 5:return new n(e[0],e[1],e[2],e[3],e[4]);case 6:return new n(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new n(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var t=Lu(n.prototype),r=n.apply(t,e);return Lo(r)?r:t}}function yt(n){function e(t,r,o){o&&$t(t,r,o)&&(r=E);var i=Gt(t,n,E,E,E,E,E,r);return i.placeholder=e.placeholder,i}return e}function mt(n,e){return yo(function(t){var r=t[0];return null==r?r:(t.push(e),n.apply(E,t))})}function bt(n,e){return function(t,r,o){if(o&&$t(t,r,o)&&(r=E),r=Nt(r,o,3),1==r.length){t=ja(t)?t:lr(t);var i=ae(t,r,n,e);if(!t.length||i!==e)return i}return Oe(t,r,n,e)}}function wt(n,e){return function(t,r,o){if(r=Nt(r,o,3),ja(t)){var i=u(t,r,e);return i>-1?t[i]:E}return je(t,r,n)}}function At(n){return function(e,t,r){return e&&e.length?(t=Nt(t,r,3),u(e,t,n)):-1}}function St(n){return function(e,t,r){return t=Nt(t,r,3),je(e,t,n,!0)}}function xt(n){return function(){for(var e,t=arguments.length,o=n?t:-1,i=0,u=Ni(t);n?o--:++o<t;){var a=u[i++]=arguments[o];if("function"!=typeof a)throw new Yi(V);!e&&r.prototype.thru&&"wrapper"==zt(a)&&(e=new r([],!0))}for(o=e?-1:t;++o<t;){a=u[o];var f=zt(a),c="wrapper"==f?Nu(a):E;e=c&&er(c[0])&&c[1]==(k|D|T|G)&&!c[4].length&&1==c[9]?e[zt(c[0])].apply(e,c[3]):1==a.length&&er(a)?e[f]():e.thru(a)}return function(){var n=arguments,r=n[0];if(e&&1==n.length&&ja(r)&&r.length>=z)return e.plant(r).value();for(var o=0,i=t?u[o].apply(this,n):r;++o<t;)i=u[o].call(this,i);return i}}}function Pt(n,e){return function(t,r,o){return"function"==typeof r&&o===E&&ja(t)?n(t,r):e(t,ut(r,o,3))}}function Ot(n){return function(e,t,r){return("function"!=typeof t||r!==E)&&(t=ut(t,r,3)),n(e,t,ei)}}function Et(n){return function(e,t,r){return("function"!=typeof t||r!==E)&&(t=ut(t,r,3)),n(e,t)}}function Mt(n){return function(e,t,r){var o={};return t=Nt(t,r,3),De(e,function(e,r,i){var u=t(e,r,i);r=n?u:r,e=n?e:u,o[r]=e}),o}}function jt(n){return function(e,t,r){return e=c(e),(n?e:"")+Ct(e,t,r)+(n?"":e)}}function It(n){var e=yo(function(t,r){var o=w(r,e.placeholder);return Gt(t,n,E,r,o)});return e}function Bt(n,e){return function(t,r,o,i){var u=arguments.length<3;return"function"==typeof r&&i===E&&ja(t)?n(t,r,o,u):Je(t,Nt(r,i,4),o,u,e)}}function Dt(n,e,t,r,o,i,u,a,f,c){function l(){for(var y=arguments.length,m=y,b=Ni(y);m--;)b[m]=arguments[m];if(r&&(b=ft(b,r,o)),i&&(b=ct(b,i,u)),h||g){var A=l.placeholder,S=w(b,A);if(y-=S.length,c>y){var x=a?ee(a):E,P=Au(c-y,0),O=h?S:E,M=h?E:S,B=h?b:E,D=h?E:b;e|=h?T:L,e&=~(h?L:T),v||(e&=~(j|I));var C=[n,e,t,B,O,D,M,x,f,P],k=Dt.apply(E,C);return er(n)&&Xu(k,C),k.placeholder=A,k}}var G=p?t:this,H=d?G[n]:n;return a&&(b=fr(b,a)),s&&f<b.length&&(b.length=f),this&&this!==oe&&this instanceof l&&(H=_||_t(n)),H.apply(G,b)}var s=e&k,p=e&j,d=e&I,h=e&D,v=e&B,g=e&C,_=d?E:_t(n);return l}function Ct(n,e,t){var r=n.length;if(e=+e,r>=e||!bu(e))return"";var o=e-r;return t=null==t?" ":t+"",_i(t,gu(o/t.length)).slice(0,o)}function Tt(n,e,t,r){function o(){for(var e=-1,a=arguments.length,f=-1,c=r.length,l=Ni(c+a);++f<c;)l[f]=r[f];for(;a--;)l[f++]=arguments[++e];var s=this&&this!==oe&&this instanceof o?u:n;return s.apply(i?t:this,l)}var i=e&j,u=_t(n);return o}function Lt(n){var e=Vi[n];return function(n,t){return t=t===E?0:+t||0,t?(t=cu(10,t),e(n*t)/t):e(n)}}function kt(n){return function(e,t,r,o){var i=Nt(r);return null==r&&i===we?ot(e,t,n):it(e,t,i(r,o,1),n)}}function Gt(n,e,t,r,o,i,u,a){var f=e&I;if(!f&&"function"!=typeof n)throw new Yi(V);var c=r?r.length:0;if(c||(e&=~(T|L),r=o=E),c-=o?o.length:0,e&L){var l=r,s=o;r=o=E}var p=f?E:Nu(n),d=[n,e,t,r,o,l,s,i,u,a];if(p&&(or(d,p),e=d[1],a=d[9]),d[9]=null==a?f?0:n.length:Au(a-c,0)||0,e==j)var h=ht(d[0],d[2]);else h=e!=T&&e!=(j|T)||d[4].length?Dt.apply(E,d):Tt.apply(E,d);var v=p?Uu:Xu;return v(h,d)}function Ht(n,e,t,r,o,i,u){var a=-1,f=n.length,c=e.length;if(f!=c&&!(o&&c>f))return!1;for(;++a<f;){var l=n[a],s=e[a],p=r?r(o?s:l,o?l:s,a):E;if(p!==E){if(p)continue;return!1}if(o){if(!de(e,function(n){return l===n||t(l,n,r,o,i,u)}))return!1}else if(l!==s&&!t(l,s,r,o,i,u))return!1}return!0}function Rt(n,e,t){switch(t){case Q:case Y:return+n==+e;case K:return n.name==e.name&&n.message==e.message;case nn:return n!=+n?e!=+e:n==+e;case tn:case on:return n==e+""}return!1}function Ut(n,e,t,r,o,i,u){var a=Ua(n),f=a.length,c=Ua(e),l=c.length;if(f!=l&&!o)return!1;for(var s=f;s--;){var p=a[s];if(!(o?p in e:eu.call(e,p)))return!1}for(var d=o;++s<f;){p=a[s];var h=n[p],v=e[p],g=r?r(o?v:h,o?h:v,p):E;if(!(g===E?t(h,v,r,o,i,u):g))return!1;d||(d="constructor"==p)}if(!d){var _=n.constructor,y=e.constructor;if(_!=y&&"constructor"in n&&"constructor"in e&&!("function"==typeof _&&_ instanceof _&&"function"==typeof y&&y instanceof y))return!1}return!0}function Nt(n,t,r){var o=e.callback||Oi;return o=o===Oi?we:o,r?o(n,t,r):o}function zt(n){for(var e=n.name,t=Tu[e],r=t?t.length:0;r--;){var o=t[r],i=o.func;if(null==i||i==n)return o.name}return e}function Xt(n,t,r){var o=e.indexOf||xr;return o=o===xr?a:o,n?o(n,t,r):o}function Wt(n){for(var e=ti(n),t=e.length;t--;)e[t][2]=rr(e[t][1]);return e}function Vt(n,e){var t=null==n?E:n[e];return Ho(t)?t:E}function Ft(n,e,t){for(var r=-1,o=t.length;++r<o;){var i=t[r],u=i.size;switch(i.type){case"drop":n+=u;break;case"dropRight":e-=u;break;case"take":e=Su(e,n+u);break;case"takeRight":n=Au(n,e-u)}}return{start:n,end:e}}function Zt(n){var e=n.length,t=new n.constructor(e);return e&&"string"==typeof n[0]&&eu.call(n,"index")&&(t.index=n.index,t.input=n.input),t}function Jt(n){var e=n.constructor;return"function"==typeof e&&e instanceof e||(e=Zi),new e}function Qt(n,e,t){var r=n.constructor;switch(e){case an:return at(n);case Q:case Y:return new r(+n);case fn:case cn:case ln:case sn:case pn:case dn:case hn:case vn:case gn:var o=n.buffer;return new r(t?at(o):o,n.byteOffset,n.length);case nn:case on:return new r(n);case tn:var i=new r(n.source,Ln.exec(n));i.lastIndex=n.lastIndex}return i}function Yt(n,e,t){null==n||nr(e,n)||(e=pr(e),n=1==e.length?n:Le(n,Qe(e,0,-1)),e=Or(e));var r=null==n?n:n[e];return null==r?E:r.apply(n,t)}function Kt(n){return null!=n&&tr(zu(n))}function qt(n,e){return n="number"==typeof n||Hn.test(n)?+n:-1,e=null==e?Du:e,n>-1&&n%1==0&&e>n}function $t(n,e,t){if(!Lo(t))return!1;var r=typeof e;if("number"==r?Kt(t)&&qt(e,t.length):"string"==r&&e in t){var o=t[e];return n===n?n===o:o!==o}return!1}function nr(n,e){var t=typeof n;if("string"==t&&Mn.test(n)||"number"==t)return!0;if(ja(n))return!1;var r=!En.test(n);return r||null!=e&&n in sr(e)}function er(n){var t=zt(n);if(!(t in o.prototype))return!1;var r=e[t];if(n===r)return!0;var i=Nu(r);return!!i&&n===i[0]}function tr(n){return"number"==typeof n&&n>-1&&n%1==0&&Du>=n}function rr(n){return n===n&&!Lo(n)}function or(n,e){var t=n[1],r=e[1],o=t|r,i=k>o,u=r==k&&t==D||r==k&&t==G&&n[7].length<=e[8]||r==(k|G)&&t==D;if(!i&&!u)return n;r&j&&(n[2]=e[2],o|=t&j?0:B);var a=e[3];if(a){var f=n[3];n[3]=f?ft(f,a,e[4]):ee(a),n[4]=f?w(n[3],F):ee(e[4])}return a=e[5],a&&(f=n[5],n[5]=f?ct(f,a,e[6]):ee(a),n[6]=f?w(n[5],F):ee(e[6])),a=e[7],a&&(n[7]=ee(a)),r&k&&(n[8]=null==n[8]?e[8]:Su(n[8],e[8])),null==n[9]&&(n[9]=e[9]),n[0]=e[0],n[1]=o,n}function ir(n,e){return n===E?e:Ia(n,e,ir)}function ur(n,e){n=sr(n);for(var t=-1,r=e.length,o={};++t<r;){var i=e[t];i in n&&(o[i]=n[i])}return o}function ar(n,e){var t={};return Be(n,function(n,r,o){e(n,r,o)&&(t[r]=n)}),t}function fr(n,e){for(var t=n.length,r=Su(e.length,t),o=ee(n);r--;){var i=e[r];n[r]=qt(i,t)?o[i]:E}return n}function cr(n){for(var e=ei(n),t=e.length,r=t&&n.length,o=!!r&&tr(r)&&(ja(n)||Oo(n)),i=-1,u=[];++i<t;){var a=e[i];(o&&qt(a,r)||eu.call(n,a))&&u.push(a)}return u}function lr(n){return null==n?[]:Kt(n)?Lo(n)?n:Zi(n):ui(n)}function sr(n){return Lo(n)?n:Zi(n)}function pr(n){if(ja(n))return n;var e=[];return c(n).replace(jn,function(n,t,r,o){e.push(r?o.replace(Cn,"$1"):t||n)}),e}function dr(n){return n instanceof o?n.clone():new r(n.__wrapped__,n.__chain__,ee(n.__actions__))}function hr(n,e,t){e=(t?$t(n,e,t):null==e)?1:Au(yu(e)||1,1);for(var r=0,o=n?n.length:0,i=-1,u=Ni(gu(o/e));o>r;)u[++i]=Qe(n,r,r+=e);return u}function vr(n){for(var e=-1,t=n?n.length:0,r=-1,o=[];++e<t;){var i=n[e];i&&(o[++r]=i)}return o}function gr(n,e,t){var r=n?n.length:0;return r?((t?$t(n,e,t):null==e)&&(e=1),Qe(n,0>e?0:e)):[]}function _r(n,e,t){var r=n?n.length:0;return r?((t?$t(n,e,t):null==e)&&(e=1),e=r-(+e||0),Qe(n,0,0>e?0:e)):[]}function yr(n,e,t){return n&&n.length?tt(n,Nt(e,t,3),!0,!0):[]}function mr(n,e,t){return n&&n.length?tt(n,Nt(e,t,3),!0):[]}function br(n,e,t,r){var o=n?n.length:0;return o?(t&&"number"!=typeof t&&$t(n,e,t)&&(t=0,r=o),Ee(n,e,t,r)):[]}function wr(n){return n?n[0]:E}function Ar(n,e,t){var r=n?n.length:0;return t&&$t(n,e,t)&&(e=!1),r?Ie(n,e):[]}function Sr(n){var e=n?n.length:0;return e?Ie(n,!0):[]}function xr(n,e,t){var r=n?n.length:0;if(!r)return-1;if("number"==typeof t)t=0>t?Au(r+t,0):t;else if(t){var o=ot(n,e);return r>o&&(e===e?e===n[o]:n[o]!==n[o])?o:-1}return a(n,e,t||0)}function Pr(n){return _r(n,1)}function Or(n){var e=n?n.length:0;return e?n[e-1]:E}function Er(n,e,t){var r=n?n.length:0;if(!r)return-1;var o=r;if("number"==typeof t)o=(0>t?Au(r+t,0):Su(t||0,r-1))+1;else if(t){o=ot(n,e,!0)-1;var i=n[o];return(e===e?e===i:i!==i)?o:-1}if(e!==e)return y(n,o,!0);for(;o--;)if(n[o]===e)return o;return-1}function Mr(){var n=arguments,e=n[0];if(!e||!e.length)return e;for(var t=0,r=Xt(),o=n.length;++t<o;)for(var i=0,u=n[t];(i=r(e,u,i))>-1;)du.call(e,i,1);return e}function jr(n,e,t){var r=[];if(!n||!n.length)return r;var o=-1,i=[],u=n.length;for(e=Nt(e,t,3);++o<u;){var a=n[o];e(a,o,n)&&(r.push(a),i.push(o))}return Fe(n,i),r}function Ir(n){return gr(n,1)}function Br(n,e,t){var r=n?n.length:0;return r?(t&&"number"!=typeof t&&$t(n,e,t)&&(e=0,t=r),Qe(n,e,t)):[]}function Dr(n,e,t){var r=n?n.length:0;return r?((t?$t(n,e,t):null==e)&&(e=1),Qe(n,0,0>e?0:e)):[]}function Cr(n,e,t){var r=n?n.length:0;return r?((t?$t(n,e,t):null==e)&&(e=1),e=r-(+e||0),Qe(n,0>e?0:e)):[]}function Tr(n,e,t){return n&&n.length?tt(n,Nt(e,t,3),!1,!0):[]}function Lr(n,e,t){return n&&n.length?tt(n,Nt(e,t,3)):[]}function kr(n,e,t,r){var o=n?n.length:0;if(!o)return[];null!=e&&"boolean"!=typeof e&&(r=t,t=$t(n,e,r)?E:e,e=!1);var i=Nt();return(null!=t||i!==we)&&(t=i(t,r,3)),e&&Xt()==a?A(n,t):nt(n,t)}function Gr(n){if(!n||!n.length)return[];var e=-1,t=0;n=fe(n,function(n){return Kt(n)?(t=Au(n.length,t),!0):void 0});for(var r=Ni(t);++e<t;)r[e]=ce(n,We(e));return r}function Hr(n,e,t){var r=n?n.length:0;if(!r)return[];var o=Gr(n);return null==e?o:(e=ut(e,t,4),ce(o,function(n){return se(n,e,E,!0)}))}function Rr(){for(var n=-1,e=arguments.length;++n<e;){var t=arguments[n];if(Kt(t))var r=r?le(xe(r,t),xe(t,r)):t}return r?nt(r):[]}function Ur(n,e){var t=-1,r=n?n.length:0,o={};for(!r||e||ja(n[0])||(e=[]);++t<r;){var i=n[t];e?o[i]=e[t]:i&&(o[i[0]]=i[1])}return o}function Nr(n){var t=e(n);return t.__chain__=!0,t}function zr(n,e,t){return e.call(t,n),n}function Xr(n,e,t){return e.call(t,n)}function Wr(){return Nr(this)}function Vr(){return new r(this.value(),this.__chain__)}function Fr(n){for(var e,r=this;r instanceof t;){var o=dr(r);e?i.__wrapped__=o:e=o;var i=o;r=r.__wrapped__}return i.__wrapped__=n,e}function Zr(){var n=this.__wrapped__,e=function(n){return t&&t.__dir__<0?n:n.reverse()};if(n instanceof o){var t=n;return this.__actions__.length&&(t=new o(this)),t=t.reverse(),t.__actions__.push({func:Xr,args:[e],thisArg:E}),new r(t,this.__chain__)}return this.thru(e)}function Jr(){return this.value()+""}function Qr(){return rt(this.__wrapped__,this.__actions__)}function Yr(n,e,t){var r=ja(n)?ue:Pe;return t&&$t(n,e,t)&&(e=E),("function"!=typeof e||t!==E)&&(e=Nt(e,t,3)),r(n,e)}function Kr(n,e,t){var r=ja(n)?fe:Me;return e=Nt(e,t,3),r(n,e)}function qr(n,e){return oa(n,Ue(e))}function $r(n,e,t,r){var o=n?zu(n):0;return tr(o)||(n=ui(n),o=n.length),t="number"!=typeof t||r&&$t(e,t,r)?0:0>t?Au(o+t,0):t||0,"string"==typeof n||!ja(n)&&Xo(n)?o>=t&&n.indexOf(e,t)>-1:!!o&&Xt(n,e,t)>-1}function no(n,e,t){var r=ja(n)?ce:Re;return e=Nt(e,t,3),r(n,e)}function eo(n,e){return no(n,Ti(e))}function to(n,e,t){var r=ja(n)?fe:Me;return e=Nt(e,t,3),r(n,function(n,t,r){return!e(n,t,r)})}function ro(n,e,t){if(t?$t(n,e,t):null==e){n=lr(n);var r=n.length;return r>0?n[Ze(0,r-1)]:E}var o=-1,i=Jo(n),r=i.length,u=r-1;for(e=Su(0>e?0:+e||0,r);++o<e;){var a=Ze(o,u),f=i[a];i[a]=i[o],i[o]=f}return i.length=e,i}function oo(n){return ro(n,Mu)}function io(n){var e=n?zu(n):0;return tr(e)?e:Ua(n).length}function uo(n,e,t){var r=ja(n)?de:Ye;return t&&$t(n,e,t)&&(e=E),("function"!=typeof e||t!==E)&&(e=Nt(e,t,3)),r(n,e)}function ao(n,e,t){if(null==n)return[];t&&$t(n,e,t)&&(e=E);var r=-1;e=Nt(e,t,3);var o=Re(n,function(n,t,o){return{criteria:e(n,t,o),index:++r,value:n}});return Ke(o,p)}function fo(n,e,t,r){return null==n?[]:(r&&$t(e,t,r)&&(t=E),ja(e)||(e=null==e?[]:[e]),ja(t)||(t=null==t?[]:[t]),qe(n,e,t))}function co(n,e){return Kr(n,Ue(e))}function lo(n,e){if("function"!=typeof e){if("function"!=typeof n)throw new Yi(V);var t=n;n=e,e=t}return n=bu(n=+n)?n:0,function(){return--n<1?e.apply(this,arguments):void 0}}function so(n,e,t){return t&&$t(n,e,t)&&(e=E),e=n&&null==e?n.length:Au(+e||0,0),Gt(n,k,E,E,E,E,e)}function po(n,e){var t;if("function"!=typeof e){if("function"!=typeof n)throw new Yi(V);var r=n;n=e,e=r}return function(){return--n>0&&(t=e.apply(this,arguments)),1>=n&&(e=E),t}}function ho(n,e,t){function r(){d&&au(d),c&&au(c),v=0,c=d=h=E}function o(e,t){t&&au(t),c=d=h=E,e&&(v=va(),l=n.apply(p,f),d||c||(f=p=E))}function i(){var n=e-(va()-s);0>=n||n>e?o(h,c):d=pu(i,n)}function u(){o(_,d)}function a(){if(f=arguments,s=va(),p=this,h=_&&(d||!y),g===!1)var t=y&&!d;else{c||y||(v=s);var r=g-(s-v),o=0>=r||r>g;o?(c&&(c=au(c)),v=s,l=n.apply(p,f)):c||(c=pu(u,r))}return o&&d?d=au(d):d||e===g||(d=pu(i,e)),t&&(o=!0,l=n.apply(p,f)),!o||d||c||(f=p=E),l}var f,c,l,s,p,d,h,v=0,g=!1,_=!0;if("function"!=typeof n)throw new Yi(V);if(e=0>e?0:+e||0,t===!0){var y=!0;_=!1}else Lo(t)&&(y=!!t.leading,g="maxWait"in t&&Au(+t.maxWait||0,e),_="trailing"in t?!!t.trailing:_);return a.cancel=r,a}function vo(n,e){if("function"!=typeof n||e&&"function"!=typeof e)throw new Yi(V);var t=function(){var r=arguments,o=e?e.apply(this,r):r[0],i=t.cache;if(i.has(o))return i.get(o);var u=n.apply(this,r);return t.cache=i.set(o,u),u};return t.cache=new vo.Cache,t}function go(n){if("function"!=typeof n)throw new Yi(V);return function(){return!n.apply(this,arguments)}}function _o(n){return po(2,n)}function yo(n,e){if("function"!=typeof n)throw new Yi(V);return e=Au(e===E?n.length-1:+e||0,0),function(){for(var t=arguments,r=-1,o=Au(t.length-e,0),i=Ni(o);++r<o;)i[r]=t[e+r];switch(e){case 0:return n.call(this,i);case 1:return n.call(this,t[0],i);case 2:return n.call(this,t[0],t[1],i)}var u=Ni(e+1);for(r=-1;++r<e;)u[r]=t[r];return u[e]=i,n.apply(this,u)}}function mo(n){if("function"!=typeof n)throw new Yi(V);return function(e){return n.apply(this,e)}}function bo(n,e,t){var r=!0,o=!0;if("function"!=typeof n)throw new Yi(V);return t===!1?r=!1:Lo(t)&&(r="leading"in t?!!t.leading:r,o="trailing"in t?!!t.trailing:o),ho(n,e,{leading:r,maxWait:+e,trailing:o})}function wo(n,e){return e=null==e?Mi:e,Gt(e,T,E,[n],[])}function Ao(n,e,t,r){return e&&"boolean"!=typeof e&&$t(n,e,t)?e=!1:"function"==typeof e&&(r=t,t=e,e=!1),"function"==typeof t?Ae(n,e,ut(t,r,1)):Ae(n,e)}function So(n,e,t){return"function"==typeof e?Ae(n,!0,ut(e,t,1)):Ae(n,!0)}function xo(n,e){return n>e}function Po(n,e){return n>=e}function Oo(n){return m(n)&&Kt(n)&&eu.call(n,"callee")&&!lu.call(n,"callee")}function Eo(n){return n===!0||n===!1||m(n)&&ru.call(n)==Q}function Mo(n){return m(n)&&ru.call(n)==Y}function jo(n){return!!n&&1===n.nodeType&&m(n)&&!No(n)}function Io(n){return null==n?!0:Kt(n)&&(ja(n)||Xo(n)||Oo(n)||m(n)&&To(n.splice))?!n.length:!Ua(n).length}function Bo(n,e,t,r){t="function"==typeof t?ut(t,r,3):E;var o=t?t(n,e):E;return o===E?ke(n,e,t):!!o}function Do(n){return m(n)&&"string"==typeof n.message&&ru.call(n)==K}function Co(n){return"number"==typeof n&&bu(n)}function To(n){return Lo(n)&&ru.call(n)==q}function Lo(n){var e=typeof n;return!!n&&("object"==e||"function"==e)}function ko(n,e,t,r){return t="function"==typeof t?ut(t,r,3):E,He(n,Wt(e),t)}function Go(n){return Uo(n)&&n!=+n}function Ho(n){return null==n?!1:To(n)?iu.test(nu.call(n)):m(n)&&Gn.test(n)}function Ro(n){return null===n}function Uo(n){return"number"==typeof n||m(n)&&ru.call(n)==nn}function No(n){var e;if(!m(n)||ru.call(n)!=en||Oo(n)||!eu.call(n,"constructor")&&(e=n.constructor,"function"==typeof e&&!(e instanceof e)))return!1;var t;return Be(n,function(n,e){t=e}),t===E||eu.call(n,t)}function zo(n){return Lo(n)&&ru.call(n)==tn}function Xo(n){return"string"==typeof n||m(n)&&ru.call(n)==on}function Wo(n){return m(n)&&tr(n.length)&&!!Vn[ru.call(n)]}function Vo(n){return n===E}function Fo(n,e){return e>n}function Zo(n,e){return e>=n}function Jo(n){var e=n?zu(n):0;return tr(e)?e?ee(n):[]:ui(n)}function Qo(n){return be(n,ei(n))}function Yo(n,e,t){var r=Lu(n);return t&&$t(n,e,t)&&(e=E),e?ye(r,e):r}function Ko(n){return Te(n,ei(n))}function qo(n,e,t){var r=null==n?E:Le(n,pr(e),e+"");return r===E?t:r}function $o(n,e){if(null==n)return!1;var t=eu.call(n,e);if(!t&&!nr(e)){if(e=pr(e),n=1==e.length?n:Le(n,Qe(e,0,-1)),null==n)return!1;e=Or(e),t=eu.call(n,e)}return t||tr(n.length)&&qt(e,n.length)&&(ja(n)||Oo(n))}function ni(n,e,t){t&&$t(n,e,t)&&(e=E);for(var r=-1,o=Ua(n),i=o.length,u={};++r<i;){var a=o[r],f=n[a];e?eu.call(u,f)?u[f].push(a):u[f]=[a]:u[f]=a}return u}function ei(n){if(null==n)return[];Lo(n)||(n=Zi(n));var e=n.length;e=e&&tr(e)&&(ja(n)||Oo(n))&&e||0;for(var t=n.constructor,r=-1,o="function"==typeof t&&t.prototype===n,i=Ni(e),u=e>0;++r<e;)i[r]=r+"";for(var a in n)u&&qt(a,e)||"constructor"==a&&(o||!eu.call(n,a))||i.push(a);return i}function ti(n){n=sr(n);for(var e=-1,t=Ua(n),r=t.length,o=Ni(r);++e<r;){var i=t[e];o[e]=[i,n[i]]}return o}function ri(n,e,t){var r=null==n?E:n[e];return r===E&&(null==n||nr(e,n)||(e=pr(e),n=1==e.length?n:Le(n,Qe(e,0,-1)),r=null==n?E:n[Or(e)]),r=r===E?t:r),To(r)?r.call(n):r}function oi(n,e,t){if(null==n)return n;var r=e+"";e=null!=n[r]||nr(e,n)?[r]:pr(e);for(var o=-1,i=e.length,u=i-1,a=n;null!=a&&++o<i;){var f=e[o];Lo(a)&&(o==u?a[f]=t:null==a[f]&&(a[f]=qt(e[o+1])?[]:{})),a=a[f]}return n}function ii(n,e,t,r){var o=ja(n)||Wo(n);if(e=Nt(e,r,4),null==t)if(o||Lo(n)){var i=n.constructor;t=o?ja(n)?new i:[]:Lu(To(i)?i.prototype:E)}else t={};return(o?te:De)(n,function(n,r,o){return e(t,n,r,o)}),t}function ui(n){return et(n,Ua(n))}function ai(n){return et(n,ei(n))}function fi(n,e,t){return e=+e||0,t===E?(t=e,e=0):t=+t||0,n>=Su(e,t)&&n<Au(e,t)}function ci(n,e,t){t&&$t(n,e,t)&&(e=t=E);var r=null==n,o=null==e;if(null==t&&(o&&"boolean"==typeof n?(t=n,n=1):"boolean"==typeof e&&(t=e,o=!0)),r&&o&&(e=1,o=!1),n=+n||0,o?(e=n,n=0):e=+e||0,t||n%1||e%1){var i=Ou();return Su(n+i*(e-n+fu("1e-"+((i+"").length-1))),e)}return Ze(n,e)}function li(n){return n=c(n),n&&n.charAt(0).toUpperCase()+n.slice(1);
}function si(n){return n=c(n),n&&n.replace(Rn,h).replace(Dn,"")}function pi(n,e,t){n=c(n),e+="";var r=n.length;return t=t===E?r:Su(0>t?0:+t||0,r),t-=e.length,t>=0&&n.indexOf(e,t)==t}function di(n){return n=c(n),n&&Sn.test(n)?n.replace(wn,v):n}function hi(n){return n=c(n),n&&Bn.test(n)?n.replace(In,g):n||"(?:)"}function vi(n,e,t){n=c(n),e=+e;var r=n.length;if(r>=e||!bu(e))return n;var o=(e-r)/2,i=yu(o),u=gu(o);return t=Ct("",u,t),t.slice(0,i)+n+t}function gi(n,e,t){return(t?$t(n,e,t):null==e)?e=0:e&&(e=+e),n=bi(n),Pu(n,e||(kn.test(n)?16:10))}function _i(n,e){var t="";if(n=c(n),e=+e,1>e||!n||!bu(e))return t;do e%2&&(t+=n),e=yu(e/2),n+=n;while(e);return t}function yi(n,e,t){return n=c(n),t=null==t?0:Su(0>t?0:+t||0,n.length),n.lastIndexOf(e,t)==t}function mi(n,t,r){var o=e.templateSettings;r&&$t(n,t,r)&&(t=r=E),n=c(n),t=_e(ye({},r||t),o,ge);var i,u,a=_e(ye({},t.imports),o.imports,ge),f=Ua(a),l=et(a,f),s=0,p=t.interpolate||Un,d="__p += '",h=Ji((t.escape||Un).source+"|"+p.source+"|"+(p===On?Tn:Un).source+"|"+(t.evaluate||Un).source+"|$","g"),v="//# sourceURL="+("sourceURL"in t?t.sourceURL:"lodash.templateSources["+ ++Wn+"]")+"\n";n.replace(h,function(e,t,r,o,a,f){return r||(r=o),d+=n.slice(s,f).replace(Nn,_),t&&(i=!0,d+="' +\n__e("+t+") +\n'"),a&&(u=!0,d+="';\n"+a+";\n__p += '"),r&&(d+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),s=f+e.length,e}),d+="';\n";var g=t.variable;g||(d="with (obj) {\n"+d+"\n}\n"),d=(u?d.replace(_n,""):d).replace(yn,"$1").replace(mn,"$1;"),d="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(u?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var y=Ka(function(){return Wi(f,v+"return "+d).apply(E,l)});if(y.source=d,Do(y))throw y;return y}function bi(n,e,t){var r=n;return(n=c(n))?(t?$t(r,e,t):null==e)?n.slice(S(n),x(n)+1):(e+="",n.slice(l(n,e),s(n,e)+1)):n}function wi(n,e,t){var r=n;return n=c(n),n?(t?$t(r,e,t):null==e)?n.slice(S(n)):n.slice(l(n,e+"")):n}function Ai(n,e,t){var r=n;return n=c(n),n?(t?$t(r,e,t):null==e)?n.slice(0,x(n)+1):n.slice(0,s(n,e+"")+1):n}function Si(n,e,t){t&&$t(n,e,t)&&(e=E);var r=H,o=R;if(null!=e)if(Lo(e)){var i="separator"in e?e.separator:i;r="length"in e?+e.length||0:r,o="omission"in e?c(e.omission):o}else r=+e||0;if(n=c(n),r>=n.length)return n;var u=r-o.length;if(1>u)return o;var a=n.slice(0,u);if(null==i)return a+o;if(zo(i)){if(n.slice(u).search(i)){var f,l,s=n.slice(0,u);for(i.global||(i=Ji(i.source,(Ln.exec(i)||"")+"g")),i.lastIndex=0;f=i.exec(s);)l=f.index;a=a.slice(0,null==l?u:l)}}else if(n.indexOf(i,u)!=u){var p=a.lastIndexOf(i);p>-1&&(a=a.slice(0,p))}return a+o}function xi(n){return n=c(n),n&&An.test(n)?n.replace(bn,P):n}function Pi(n,e,t){return t&&$t(n,e,t)&&(e=E),n=c(n),n.match(e||zn)||[]}function Oi(n,e,t){return t&&$t(n,e,t)&&(e=E),m(n)?ji(n):we(n,e)}function Ei(n){return function(){return n}}function Mi(n){return n}function ji(n){return Ue(Ae(n,!0))}function Ii(n,e){return Ne(n,Ae(e,!0))}function Bi(n,e,t){if(null==t){var r=Lo(e),o=r?Ua(e):E,i=o&&o.length?Te(e,o):E;(i?i.length:r)||(i=!1,t=e,e=n,n=this)}i||(i=Te(e,Ua(e)));var u=!0,a=-1,f=To(n),c=i.length;t===!1?u=!1:Lo(t)&&"chain"in t&&(u=t.chain);for(;++a<c;){var l=i[a],s=e[l];n[l]=s,f&&(n.prototype[l]=function(e){return function(){var t=this.__chain__;if(u||t){var r=n(this.__wrapped__),o=r.__actions__=ee(this.__actions__);return o.push({func:e,args:arguments,thisArg:n}),r.__chain__=t,r}return e.apply(n,le([this.value()],arguments))}}(s))}return n}function Di(){return oe._=ou,this}function Ci(){}function Ti(n){return nr(n)?We(n):Ve(n)}function Li(n){return function(e){return Le(n,pr(e),e+"")}}function ki(n,e,t){t&&$t(n,e,t)&&(e=t=E),n=+n||0,t=null==t?1:+t||0,null==e?(e=n,n=0):e=+e||0;for(var r=-1,o=Au(gu((e-n)/(t||1)),0),i=Ni(o);++r<o;)i[r]=n,n+=t;return i}function Gi(n,e,t){if(n=yu(n),1>n||!bu(n))return[];var r=-1,o=Ni(Su(n,ju));for(e=ut(e,t,1);++r<n;)ju>r?o[r]=e(r):e(r);return o}function Hi(n){var e=++tu;return c(n)+e}function Ri(n,e){return(+n||0)+(+e||0)}function Ui(n,e,t){return t&&$t(n,e,t)&&(e=E),e=Nt(e,t,3),1==e.length?he(ja(n)?n:lr(n),e):$e(n,e)}n=n?ie.defaults(oe.Object(),n,ie.pick(oe,Xn)):oe;var Ni=n.Array,zi=n.Date,Xi=n.Error,Wi=n.Function,Vi=n.Math,Fi=n.Number,Zi=n.Object,Ji=n.RegExp,Qi=n.String,Yi=n.TypeError,Ki=Ni.prototype,qi=Zi.prototype,$i=Qi.prototype,nu=Wi.prototype.toString,eu=qi.hasOwnProperty,tu=0,ru=qi.toString,ou=oe._,iu=Ji("^"+nu.call(eu).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),uu=n.ArrayBuffer,au=n.clearTimeout,fu=n.parseFloat,cu=Vi.pow,lu=qi.propertyIsEnumerable,su=Vt(n,"Set"),pu=n.setTimeout,du=Ki.splice,hu=n.Uint8Array,vu=Vt(n,"WeakMap"),gu=Vi.ceil,_u=Vt(Zi,"create"),yu=Vi.floor,mu=Vt(Ni,"isArray"),bu=n.isFinite,wu=Vt(Zi,"keys"),Au=Vi.max,Su=Vi.min,xu=Vt(zi,"now"),Pu=n.parseInt,Ou=Vi.random,Eu=Fi.NEGATIVE_INFINITY,Mu=Fi.POSITIVE_INFINITY,ju=4294967295,Iu=ju-1,Bu=ju>>>1,Du=9007199254740991,Cu=vu&&new vu,Tu={};e.support={};e.templateSettings={escape:xn,evaluate:Pn,interpolate:On,variable:"",imports:{_:e}};var Lu=function(){function n(){}return function(e){if(Lo(e)){n.prototype=e;var t=new n;n.prototype=E}return t||{}}}(),ku=pt(De),Gu=pt(Ce,!0),Hu=dt(),Ru=dt(!0),Uu=Cu?function(n,e){return Cu.set(n,e),n}:Mi,Nu=Cu?function(n){return Cu.get(n)}:Ci,zu=We("length"),Xu=function(){var n=0,e=0;return function(t,r){var o=va(),i=N-(o-e);if(e=o,i>0){if(++n>=U)return t}else n=0;return Uu(t,r)}}(),Wu=yo(function(n,e){return m(n)&&Kt(n)?xe(n,Ie(e,!1,!0)):[]}),Vu=At(),Fu=At(!0),Zu=yo(function(n){for(var e=n.length,t=e,r=Ni(s),o=Xt(),i=o==a,u=[];t--;){var f=n[t]=Kt(f=n[t])?f:[];r[t]=i&&f.length>=120?vt(t&&f):null}var c=n[0],l=-1,s=c?c.length:0,p=r[0];n:for(;++l<s;)if(f=c[l],(p?qn(p,f):o(u,f,0))<0){for(var t=e;--t;){var d=r[t];if((d?qn(d,f):o(n[t],f,0))<0)continue n}p&&p.push(f),u.push(f)}return u}),Ju=yo(function(n,e){e=Ie(e);var t=me(n,e);return Fe(n,e.sort(i)),t}),Qu=kt(),Yu=kt(!0),Ku=yo(function(n){return nt(Ie(n,!1,!0))}),qu=yo(function(n,e){return Kt(n)?xe(n,e):[]}),$u=yo(Gr),na=yo(function(n){var e=n.length,t=e>2?n[e-2]:E,r=e>1?n[e-1]:E;return e>2&&"function"==typeof t?e-=2:(t=e>1&&"function"==typeof r?(--e,r):E,r=E),n.length=e,Hr(n,t,r)}),ea=yo(function(n){return n=Ie(n),this.thru(function(e){return ne(ja(e)?e:[sr(e)],n)})}),ta=yo(function(n,e){return me(n,Ie(e))}),ra=lt(function(n,e,t){eu.call(n,t)?++n[t]:n[t]=1}),oa=wt(ku),ia=wt(Gu,!0),ua=Pt(te,ku),aa=Pt(re,Gu),fa=lt(function(n,e,t){eu.call(n,t)?n[t].push(e):n[t]=[e]}),ca=lt(function(n,e,t){n[t]=e}),la=yo(function(n,e,t){var r=-1,o="function"==typeof e,i=nr(e),u=Kt(n)?Ni(n.length):[];return ku(n,function(n){var a=o?e:i&&null!=n?n[e]:E;u[++r]=a?a.apply(n,t):Yt(n,e,t)}),u}),sa=lt(function(n,e,t){n[t?0:1].push(e)},function(){return[[],[]]}),pa=Bt(se,ku),da=Bt(pe,Gu),ha=yo(function(n,e){if(null==n)return[];var t=e[2];return t&&$t(e[0],e[1],t)&&(e.length=1),qe(n,Ie(e),[])}),va=xu||function(){return(new zi).getTime()},ga=yo(function(n,e,t){var r=j;if(t.length){var o=w(t,ga.placeholder);r|=T}return Gt(n,r,e,t,o)}),_a=yo(function(n,e){e=e.length?Ie(e):Ko(n);for(var t=-1,r=e.length;++t<r;){var o=e[t];n[o]=Gt(n[o],j,n)}return n}),ya=yo(function(n,e,t){var r=j|I;if(t.length){var o=w(t,ya.placeholder);r|=T}return Gt(e,r,n,t,o)}),ma=yt(D),ba=yt(C),wa=yo(function(n,e){return Se(n,1,e)}),Aa=yo(function(n,e,t){return Se(n,e,t)}),Sa=xt(),xa=xt(!0),Pa=yo(function(n,e){if(e=Ie(e),"function"!=typeof n||!ue(e,f))throw new Yi(V);var t=e.length;return yo(function(r){for(var o=Su(r.length,t);o--;)r[o]=e[o](r[o]);return n.apply(this,r)})}),Oa=It(T),Ea=It(L),Ma=yo(function(n,e){return Gt(n,G,E,E,E,Ie(e))}),ja=mu||function(n){return m(n)&&tr(n.length)&&ru.call(n)==J},Ia=st(ze),Ba=st(function(n,e,t){return t?_e(n,e,t):ye(n,e)}),Da=mt(Ba,ve),Ca=mt(Ia,ir),Ta=St(De),La=St(Ce),ka=Ot(Hu),Ga=Ot(Ru),Ha=Et(De),Ra=Et(Ce),Ua=wu?function(n){var e=null==n?E:n.constructor;return"function"==typeof e&&e.prototype===n||"function"!=typeof n&&Kt(n)?cr(n):Lo(n)?wu(n):[]}:cr,Na=Mt(!0),za=Mt(),Xa=yo(function(n,e){if(null==n)return{};if("function"!=typeof e[0]){var e=ce(Ie(e),Qi);return ur(n,xe(ei(n),e))}var t=ut(e[0],e[1],3);return ar(n,function(n,e,r){return!t(n,e,r)})}),Wa=yo(function(n,e){return null==n?{}:"function"==typeof e[0]?ar(n,ut(e[0],e[1],3)):ur(n,Ie(e))}),Va=gt(function(n,e,t){return e=e.toLowerCase(),n+(t?e.charAt(0).toUpperCase()+e.slice(1):e)}),Fa=gt(function(n,e,t){return n+(t?"-":"")+e.toLowerCase()}),Za=jt(),Ja=jt(!0),Qa=gt(function(n,e,t){return n+(t?"_":"")+e.toLowerCase()}),Ya=gt(function(n,e,t){return n+(t?" ":"")+(e.charAt(0).toUpperCase()+e.slice(1))}),Ka=yo(function(n,e){try{return n.apply(E,e)}catch(t){return Do(t)?t:new Xi(t)}}),qa=yo(function(n,e){return function(t){return Yt(t,n,e)}}),$a=yo(function(n,e){return function(t){return Yt(n,t,e)}}),nf=Lt("ceil"),ef=Lt("floor"),tf=bt(xo,Eu),rf=bt(Fo,Mu),of=Lt("round");return e.prototype=t.prototype,r.prototype=Lu(t.prototype),r.prototype.constructor=r,o.prototype=Lu(t.prototype),o.prototype.constructor=o,un.prototype["delete"]=Zn,un.prototype.get=Jn,un.prototype.has=Qn,un.prototype.set=Yn,Kn.prototype.push=$n,vo.Cache=un,e.after=lo,e.ary=so,e.assign=Ba,e.at=ta,e.before=po,e.bind=ga,e.bindAll=_a,e.bindKey=ya,e.callback=Oi,e.chain=Nr,e.chunk=hr,e.compact=vr,e.constant=Ei,e.countBy=ra,e.create=Yo,e.curry=ma,e.curryRight=ba,e.debounce=ho,e.defaults=Da,e.defaultsDeep=Ca,e.defer=wa,e.delay=Aa,e.difference=Wu,e.drop=gr,e.dropRight=_r,e.dropRightWhile=yr,e.dropWhile=mr,e.fill=br,e.filter=Kr,e.flatten=Ar,e.flattenDeep=Sr,e.flow=Sa,e.flowRight=xa,e.forEach=ua,e.forEachRight=aa,e.forIn=ka,e.forInRight=Ga,e.forOwn=Ha,e.forOwnRight=Ra,e.functions=Ko,e.groupBy=fa,e.indexBy=ca,e.initial=Pr,e.intersection=Zu,e.invert=ni,e.invoke=la,e.keys=Ua,e.keysIn=ei,e.map=no,e.mapKeys=Na,e.mapValues=za,e.matches=ji,e.matchesProperty=Ii,e.memoize=vo,e.merge=Ia,e.method=qa,e.methodOf=$a,e.mixin=Bi,e.modArgs=Pa,e.negate=go,e.omit=Xa,e.once=_o,e.pairs=ti,e.partial=Oa,e.partialRight=Ea,e.partition=sa,e.pick=Wa,e.pluck=eo,e.property=Ti,e.propertyOf=Li,e.pull=Mr,e.pullAt=Ju,e.range=ki,e.rearg=Ma,e.reject=to,e.remove=jr,e.rest=Ir,e.restParam=yo,e.set=oi,e.shuffle=oo,e.slice=Br,e.sortBy=ao,e.sortByAll=ha,e.sortByOrder=fo,e.spread=mo,e.take=Dr,e.takeRight=Cr,e.takeRightWhile=Tr,e.takeWhile=Lr,e.tap=zr,e.throttle=bo,e.thru=Xr,e.times=Gi,e.toArray=Jo,e.toPlainObject=Qo,e.transform=ii,e.union=Ku,e.uniq=kr,e.unzip=Gr,e.unzipWith=Hr,e.values=ui,e.valuesIn=ai,e.where=co,e.without=qu,e.wrap=wo,e.xor=Rr,e.zip=$u,e.zipObject=Ur,e.zipWith=na,e.backflow=xa,e.collect=no,e.compose=xa,e.each=ua,e.eachRight=aa,e.extend=Ba,e.iteratee=Oi,e.methods=Ko,e.object=Ur,e.select=Kr,e.tail=Ir,e.unique=kr,Bi(e,e),e.add=Ri,e.attempt=Ka,e.camelCase=Va,e.capitalize=li,e.ceil=nf,e.clone=Ao,e.cloneDeep=So,e.deburr=si,e.endsWith=pi,e.escape=di,e.escapeRegExp=hi,e.every=Yr,e.find=oa,e.findIndex=Vu,e.findKey=Ta,e.findLast=ia,e.findLastIndex=Fu,e.findLastKey=La,e.findWhere=qr,e.first=wr,e.floor=ef,e.get=qo,e.gt=xo,e.gte=Po,e.has=$o,e.identity=Mi,e.includes=$r,e.indexOf=xr,e.inRange=fi,e.isArguments=Oo,e.isArray=ja,e.isBoolean=Eo,e.isDate=Mo,e.isElement=jo,e.isEmpty=Io,e.isEqual=Bo,e.isError=Do,e.isFinite=Co,e.isFunction=To,e.isMatch=ko,e.isNaN=Go,e.isNative=Ho,e.isNull=Ro,e.isNumber=Uo,e.isObject=Lo,e.isPlainObject=No,e.isRegExp=zo,e.isString=Xo,e.isTypedArray=Wo,e.isUndefined=Vo,e.kebabCase=Fa,e.last=Or,e.lastIndexOf=Er,e.lt=Fo,e.lte=Zo,e.max=tf,e.min=rf,e.noConflict=Di,e.noop=Ci,e.now=va,e.pad=vi,e.padLeft=Za,e.padRight=Ja,e.parseInt=gi,e.random=ci,e.reduce=pa,e.reduceRight=da,e.repeat=_i,e.result=ri,e.round=of,e.runInContext=O,e.size=io,e.snakeCase=Qa,e.some=uo,e.sortedIndex=Qu,e.sortedLastIndex=Yu,e.startCase=Ya,e.startsWith=yi,e.sum=Ui,e.template=mi,e.trim=bi,e.trimLeft=wi,e.trimRight=Ai,e.trunc=Si,e.unescape=xi,e.uniqueId=Hi,e.words=Pi,e.all=Yr,e.any=uo,e.contains=$r,e.eq=Bo,e.detect=oa,e.foldl=pa,e.foldr=da,e.head=wr,e.include=$r,e.inject=pa,Bi(e,function(){var n={};return De(e,function(t,r){e.prototype[r]||(n[r]=t)}),n}(),!1),e.sample=ro,e.prototype.sample=function(n){return this.__chain__||null!=n?this.thru(function(e){return ro(e,n)}):ro(this.value())},e.VERSION=M,te(["bind","bindKey","curry","curryRight","partial","partialRight"],function(n){e[n].placeholder=e}),te(["drop","take"],function(n,e){o.prototype[n]=function(t){var r=this.__filtered__;if(r&&!e)return new o(this);t=null==t?1:Au(yu(t)||0,0);var i=this.clone();return r?i.__takeCount__=Su(i.__takeCount__,t):i.__views__.push({size:t,type:n+(i.__dir__<0?"Right":"")}),i},o.prototype[n+"Right"]=function(e){return this.reverse()[n](e).reverse()}}),te(["filter","map","takeWhile"],function(n,e){var t=e+1,r=t!=W;o.prototype[n]=function(n,e){var o=this.clone();return o.__iteratees__.push({iteratee:Nt(n,e,1),type:t}),o.__filtered__=o.__filtered__||r,o}}),te(["first","last"],function(n,e){var t="take"+(e?"Right":"");o.prototype[n]=function(){return this[t](1).value()[0]}}),te(["initial","rest"],function(n,e){var t="drop"+(e?"":"Right");o.prototype[n]=function(){return this.__filtered__?new o(this):this[t](1)}}),te(["pluck","where"],function(n,e){var t=e?"filter":"map",r=e?Ue:Ti;o.prototype[n]=function(n){return this[t](r(n))}}),o.prototype.compact=function(){return this.filter(Mi)},o.prototype.reject=function(n,e){return n=Nt(n,e,1),this.filter(function(e){return!n(e)})},o.prototype.slice=function(n,e){n=null==n?0:+n||0;var t=this;return t.__filtered__&&(n>0||0>e)?new o(t):(0>n?t=t.takeRight(-n):n&&(t=t.drop(n)),e!==E&&(e=+e||0,t=0>e?t.dropRight(-e):t.take(e-n)),t)},o.prototype.takeRightWhile=function(n,e){return this.reverse().takeWhile(n,e).reverse()},o.prototype.toArray=function(){return this.take(Mu)},De(o.prototype,function(n,t){var i=/^(?:filter|map|reject)|While$/.test(t),u=/^(?:first|last)$/.test(t),a=e[u?"take"+("last"==t?"Right":""):t];a&&(e.prototype[t]=function(){var e=u?[1]:arguments,t=this.__chain__,f=this.__wrapped__,c=!!this.__actions__.length,l=f instanceof o,s=e[0],p=l||ja(f);p&&i&&"function"==typeof s&&1!=s.length&&(l=p=!1);var d=function(n){return u&&t?a(n,1)[0]:a.apply(E,le([n],e))},h={func:Xr,args:[d],thisArg:E},v=l&&!c;if(u&&!t)return v?(f=f.clone(),f.__actions__.push(h),n.call(f)):a.call(E,this.value())[0];if(!u&&p){f=v?f:new o(this);var g=n.apply(f,e);return g.__actions__.push(h),new r(g,t)}return this.thru(d)})}),te(["join","pop","push","replace","shift","sort","splice","split","unshift"],function(n){var t=(/^(?:replace|split)$/.test(n)?$i:Ki)[n],r=/^(?:push|sort|unshift)$/.test(n)?"tap":"thru",o=/^(?:join|pop|replace|shift)$/.test(n);e.prototype[n]=function(){var n=arguments;return o&&!this.__chain__?t.apply(this.value(),n):this[r](function(e){return t.apply(e,n)})}}),De(o.prototype,function(n,t){var r=e[t];if(r){var o=r.name,i=Tu[o]||(Tu[o]=[]);i.push({name:t,func:r})}}),Tu[Dt(E,I).name]=[{name:"wrapper",func:E}],o.prototype.clone=b,o.prototype.reverse=$,o.prototype.value=rn,e.prototype.chain=Wr,e.prototype.commit=Vr,e.prototype.concat=ea,e.prototype.plant=Fr,e.prototype.reverse=Zr,e.prototype.toString=Jr,e.prototype.run=e.prototype.toJSON=e.prototype.valueOf=e.prototype.value=Qr,e.prototype.collect=e.prototype.map,e.prototype.head=e.prototype.first,e.prototype.select=e.prototype.filter,e.prototype.tail=e.prototype.rest,e}var E,M="3.10.1",j=1,I=2,B=4,D=8,C=16,T=32,L=64,k=128,G=256,H=30,R="...",U=150,N=16,z=200,X=1,W=2,V="Expected a function",F="__lodash_placeholder__",Z="[object Arguments]",J="[object Array]",Q="[object Boolean]",Y="[object Date]",K="[object Error]",q="[object Function]",$="[object Map]",nn="[object Number]",en="[object Object]",tn="[object RegExp]",rn="[object Set]",on="[object String]",un="[object WeakMap]",an="[object ArrayBuffer]",fn="[object Float32Array]",cn="[object Float64Array]",ln="[object Int8Array]",sn="[object Int16Array]",pn="[object Int32Array]",dn="[object Uint8Array]",hn="[object Uint8ClampedArray]",vn="[object Uint16Array]",gn="[object Uint32Array]",_n=/\b__p \+= '';/g,yn=/\b(__p \+=) '' \+/g,mn=/(__e\(.*?\)|\b__t\)) \+\n'';/g,bn=/&(?:amp|lt|gt|quot|#39|#96);/g,wn=/[&<>"'`]/g,An=RegExp(bn.source),Sn=RegExp(wn.source),xn=/<%-([\s\S]+?)%>/g,Pn=/<%([\s\S]+?)%>/g,On=/<%=([\s\S]+?)%>/g,En=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,Mn=/^\w*$/,jn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,In=/^[:!,]|[\\^$.*+?()[\]{}|\/]|(^[0-9a-fA-Fnrtuvx])|([\n\r\u2028\u2029])/g,Bn=RegExp(In.source),Dn=/[\u0300-\u036f\ufe20-\ufe23]/g,Cn=/\\(\\)?/g,Tn=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ln=/\w*$/,kn=/^0[xX]/,Gn=/^\[object .+?Constructor\]$/,Hn=/^\d+$/,Rn=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,Un=/($^)/,Nn=/['\n\r\u2028\u2029\\]/g,zn=function(){var n="[A-Z\\xc0-\\xd6\\xd8-\\xde]",e="[a-z\\xdf-\\xf6\\xf8-\\xff]+";return RegExp(n+"+(?="+n+e+")|"+n+"?"+e+"|"+n+"+|[0-9]+","g")}(),Xn=["Array","ArrayBuffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Math","Number","Object","RegExp","Set","String","_","clearTimeout","isFinite","parseFloat","parseInt","setTimeout","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap"],Wn=-1,Vn={};Vn[fn]=Vn[cn]=Vn[ln]=Vn[sn]=Vn[pn]=Vn[dn]=Vn[hn]=Vn[vn]=Vn[gn]=!0,Vn[Z]=Vn[J]=Vn[an]=Vn[Q]=Vn[Y]=Vn[K]=Vn[q]=Vn[$]=Vn[nn]=Vn[en]=Vn[tn]=Vn[rn]=Vn[on]=Vn[un]=!1;var Fn={};Fn[Z]=Fn[J]=Fn[an]=Fn[Q]=Fn[Y]=Fn[fn]=Fn[cn]=Fn[ln]=Fn[sn]=Fn[pn]=Fn[nn]=Fn[en]=Fn[tn]=Fn[on]=Fn[dn]=Fn[hn]=Fn[vn]=Fn[gn]=!0,Fn[K]=Fn[q]=Fn[$]=Fn[rn]=Fn[un]=!1;var Zn={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss"},Jn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},Qn={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},Yn={"function":!0,object:!0},Kn={0:"x30",1:"x31",2:"x32",3:"x33",4:"x34",5:"x35",6:"x36",7:"x37",8:"x38",9:"x39",A:"x41",B:"x42",C:"x43",D:"x44",E:"x45",F:"x46",a:"x61",b:"x62",c:"x63",d:"x64",e:"x65",f:"x66",n:"x6e",r:"x72",t:"x74",u:"x75",v:"x76",x:"x78"},qn={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},$n=Yn[typeof e]&&e&&!e.nodeType&&e,ne=Yn[typeof n]&&n&&!n.nodeType&&n,ee=$n&&ne&&"object"==typeof o&&o&&o.Object&&o,te=Yn[typeof self]&&self&&self.Object&&self,re=Yn[typeof window]&&window&&window.Object&&window,oe=(ne&&ne.exports===$n&&$n,ee||re!==(this&&this.window)&&re||te||this),ie=O();oe._=ie,r=function(){return ie}.call(e,t,e,n),!(r!==E&&(n.exports=r))}).call(this)}).call(e,t(4)(n),function(){return this}())},/*!***********************************!*\
  !*** (webpack)/buildin/module.js ***!
  \***********************************/
function(n,e){n.exports=function(n){return n.webpackPolyfill||(n.deprecate=function(){},n.paths=[],n.children=[],n.webpackPolyfill=1),n}},/*!*******************************!*\
  !*** ./src/gridCalculator.js ***!
  \*******************************/
function(n,e){"use strict";function t(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function n(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function n(){t(this,n)}return r(n,null,[{key:"getEdges",value:function(n,e){var t=this.posToCell(n.min,e),r=this.posToCell(n.max,e);return{minXCell:t.x+1,maxXCell:r.x-1,minZCell:t.z+1,maxZCell:r.z-1}}},{key:"posToCell",value:function(n,e){return n.clone().divide(e).round()}},{key:"cellToPos",value:function(n,e){return n.clone().multiply(e)}}]),n}();e["default"]=o},/*!**********************************!*\
  !*** ./src/models/BaseObject.js ***!
  \**********************************/
function(n,e,t){"use strict";function r(n){return n&&n.__esModule?n:{"default":n}}function o(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function i(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?n:e}function u(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}var a=function(){function n(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();Object.defineProperty(e,"__esModule",{value:!0});var f=t(2),c=r(f),l=function(n){function e(n,t,r){o(this,e);var u=i(this,Object.getPrototypeOf(e).call(this,t,r));return u.dataObject=n||{},u.rotation.order="XYZ",u.setDtoTransformations(),u}return u(e,n),a(e,[{key:"getType",value:function(){return this.vbType}},{key:"getId",value:function(){return this.dataObject&&this.dataObject.id}},{key:"setDtoTransformations",value:function(){this.position.setX(this.dataObject.pos_x||0),this.position.setY(this.dataObject.pos_y||0),this.position.setZ(this.dataObject.pos_z||0),this.dataObject.rotation&&this.rotation.fromArray(this.dataObject.rotation.map(Number)),this.updateBoundingBox()}},{key:"isOutOfParrent",value:function(){return Math.abs(this.boundingBox.center.x-this.parent.boundingBox.center.x)>this.parent.boundingBox.radius.x-this.boundingBox.radius.x||Math.abs(this.boundingBox.center.z-this.parent.boundingBox.center.z)>this.parent.boundingBox.radius.z-this.boundingBox.radius.z}},{key:"isCollided",value:function(){var n,e,t,r;if(this.updateBoundingBox(),n=this.isOutOfParrent(),e=this.parent.children,!n)for(r=e.length-1;r>=0;r--)if(t=e[r].boundingBox,!(e[r]===this||!t||Math.abs(this.boundingBox.center.x-t.center.x)>this.boundingBox.radius.x+t.radius.x||Math.abs(this.boundingBox.center.y-t.center.y)>this.boundingBox.radius.y+t.radius.y||Math.abs(this.boundingBox.center.z-t.center.z)>this.boundingBox.radius.z+t.radius.z)){n=!0;break}return n}},{key:"move",value:function(n){var e,t;return t=!1,e=this.position.clone(),n.x&&(this.position.setX(n.x),this.isCollided()?this.position.setX(e.x):t=!0),n.z&&(this.position.setZ(n.z),this.isCollided()?this.position.setZ(e.z):t=!0),this.changed=this.changed||t,this.updateBoundingBox(),t}},{key:"rotate",value:function(n,e,t){var r=this.rotation.clone(),o=!1;n&&(this.rotation.y+=.01*n,!t&&this.isCollided()?this.rotation.y=r.y:o=!0),e&&(this.rotation.x+=.01*e,!t&&this.isCollided()?this.rotation.x=r.x:o=!0),this.changed=this.changed||!t&&o,this.updateBoundingBox()}},{key:"updateBoundingBox",value:function(){var n,e,t;this.updateMatrix(),n=this.geometry.boundingBox.clone().applyMatrix4(this.matrix),e={x:.5*(n.max.x-n.min.x),y:.5*(n.max.y-n.min.y),z:.5*(n.max.z-n.min.z)},t=new c["default"].Vector3,t.addVectors(n.min,n.max),t.multiplyScalar(.5),this.boundingBox={radius:e,center:t}}},{key:"rollback",value:function(){this.setDtoTransformations()}}]),e}(c["default"].Mesh);e["default"]=l},/*!**********************!*\
  !*** ./src/cache.js ***!
  \**********************/
function(n,e,t){"use strict";function r(n){if(n&&n.__esModule)return n;var e={};if(null!=n)for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e["default"]=n,e}function o(n,e,t){var r,o=d.loadLibraryData(n),i=[],u=[];for(r in e)i.push(f(r));for(r in t)u.push(c(r));return Promise.all([o,Promise.all(i),Promise.all(u)]).then(function(n){h=n[0]})}function i(){return h}function u(n){return l(v,n,f)}function a(n){return l(g,n,c)}function f(n){return s(v,n,d.loadSectionData)}function c(n){return s(g,n,d.loadBookData)}function l(n,e,t){var r=n[e];return r||(r=t(e)),Promise.resolve(r)}function s(n,e,t){var r=t(e).then(function(t){return n[e]=t,t});return r}Object.defineProperty(e,"__esModule",{value:!0}),e.init=o,e.getLibrary=i,e.getSection=u,e.getBook=a;var p=t(8),d=r(p),h=null,v={},g={}},/*!***************************!*\
  !*** ./src/repository.js ***!
  \***************************/
function(n,e,t){"use strict";function r(n){return n&&n.__esModule?n:{"default":n}}function o(n){var e="/obj/libraries/"+n,t=e+"/model.json",r=e+"/map.jpg";return Promise.all([a(t),f(r)]).then(function(n){return{geometry:n[0],mapImage:n[1]}})}function i(n){var e="/obj/sections/"+n,t=e+"/model.js",r=e+"/map.jpg",o=e+"/data.json";return Promise.all([a(t),f(r),c(o)]).then(function(n){return{geometry:n[0],mapImage:n[1],data:n[2]}})}function u(n){var e="/obj/books/"+n,t=e+"/model.js",r=e+"/map.jpg",o=e+"/bump_map.jpg",i=e+"/specular_map.jpg";return Promise.all([a(t),f(r)["catch"](function(){return console.error("repository: Error loading book map:",n),null}),f(o)["catch"](function(){return console.error("repository: Error loading book bumpMap:",n),null}),f(i)["catch"](function(){return console.error("repository: Error loading book specularMap:",n),null})]).then(function(n){return{geometry:n[0],mapImage:n[1],bumpMapImage:n[2],specularMapImage:n[3]}})}function a(n){return new Promise(function(e,t){p.load(n,function(n){n.computeBoundingBox(),e(n)},function(){},t)})}function f(n){var e=new Image;return e.crossOrigin="",e.src=n,new Promise(function(n,t){e.onload=function(){n(e)},e.onerror=function(n){t(n)}})}function c(n){return new Promise(function(e,t){d.load(n,e,function(){},t)})}Object.defineProperty(e,"__esModule",{value:!0}),e.loadLibraryData=o,e.loadSectionData=i,e.loadBookData=u,e.loadImage=f;var l=t(2),s=r(l),p=new s["default"].JSONLoader,d=new s["default"].XHRLoader;d.setResponseType("json")},/*!****************************!*\
  !*** ./src/environment.js ***!
  \****************************/
function(n,e,t){"use strict";function r(n){if(n&&n.__esModule)return n;var e={};if(null!=n)for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e["default"]=n,e}function o(n){return n&&n.__esModule?n:{"default":n}}function i(n,e){var t=n[e];t&&(delete n[e],t.obj&&t.obj.setParent(null))}function u(n,e,t){var r=n.model,o={},i={};for(var u in e){var a=e[u].dto;o[a.model]=!0}for(var f in t){var c=t[f].dto;i[c.model]=!0}return C.init(r,o,i)}function a(){for(k.library=null,H={},R={};k.scene.children.length>0;)k.scene.children[0].dispose&&k.scene.children[0].dispose(),k.scene.remove(k.scene.children[0])}function f(n){for(var e={sections:{},books:{}},t=n.sections.length-1;t>=0;t--){var r=n.sections[t];e.sections[r.id]={dto:r};for(var o=r.books.length-1;o>=0;o--){var i=r.books[o];e.books[i.id]={dto:i}}delete r.books}return delete n.sections,e}function c(n){var e=null,t=C.getLibrary(),r=new b["default"].Texture(t.mapImage),o=new b["default"].MeshPhongMaterial({map:r});r.needsUpdate=!0,e=new x["default"](n,t.geometry,o),e.add(new b["default"].AmbientLight(3355443)),I["default"].setParent(e),k.scene.add(e),k.library=e}function l(n){return p(n,d)}function s(n){return p(n,h)}function p(n,e){var t,r=[];for(t in n)r.push(e(n[t].dto));return Promise.all(r)}function d(n){var e=C.getSection(n.model).then(function(e){var t,r=new b["default"].Texture(e.mapImage),o=new b["default"].MeshPhongMaterial({map:r});return r.needsUpdate=!0,n.data=e.data,t=new M["default"](n,e.geometry,o),k.library.add(t),v(H,t),n});return e}function h(n){return Promise.all([C.getBook(n.model),n.cover?L.loadImage(n.cover.url):Promise.resolve(null)]).then(function(e){var t=e[0],r=e[1],o=new A["default"](t.mapImage,t.bumpMapImage,t.specularMapImage,r),i=new O["default"](n,t.geometry,o);v(R,i),y(i)})}function v(n,e){var t={dto:e.dataObject,obj:e};n[e.getId()]=t}function g(n,e){var t=n[e],r=t&&t.obj;return r}function _(n){return k.getShelf(n.sectionId,n.shelfId)}function y(n){var e=_(n.dataObject);e.add(n)}Object.defineProperty(e,"__esModule",{value:!0});var m=t(2),b=o(m),w=t(10),A=o(w),S=t(13),x=o(S),P=t(14),O=o(P),E=t(15),M=o(E),j=t(17),I=o(j),B=t(1),D=t(7),C=r(D),T=t(8),L=r(T),k={};k.CLEARANCE=.001;var G=null,H={},R={};k.scene=null,k.library=null,k.loadLibrary=function(n){a();var e=f(n);return H=e.sections,R=e.books,G=n,u(G,e.sections,e.books).then(function(){return c(G),l(H)}).then(function(){return B.locator.centerObject(I["default"].object)}).then(function(){return s(R)})},k.getBook=function(n){return g(R,n)},k.getSection=function(n){return g(H,n)},k.getShelf=function(n,e){var t=k.getSection(n),r=t&&t.shelves[e];return r},k.updateSection=function(n){return n.libraryId==k.library.getId()?(k.removeSection(n.id),d(n)):(k.removeSection(n.id),Promise.resolve(n))},k.updateBook=function(n){return _(n)?(k.removeBook(n.id),h(n)):(k.removeBook(n.id),Promise.resolve(!0))},k.removeBook=function(n){i(R,n)},k.removeSection=function(n){i(H,n)},e["default"]=k},/*!***************************************!*\
  !*** ./src/materials/BookMaterial.js ***!
  \***************************************/
function(n,e,t){"use strict";function r(n){return n&&n.__esModule?n:{"default":n}}function o(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function i(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?n:e}function u(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=t(2),f=r(a),c=t(11),l=t(12),s=function(n){function e(n,t,r,u){o(this,e);var a,s,p,d,h,v,g={};a=f["default"].UniformsUtils.merge([f["default"].UniformsLib.common,f["default"].UniformsLib.bump,f["default"].UniformsLib.fog,f["default"].UniformsLib.lights]),a.shininess={type:"f",value:30},g.PHONG=!0,n&&(p=new f["default"].Texture(n),p.needsUpdate=!0,a.map={type:"t",value:p}),t&&(d=new f["default"].Texture(t),d.needsUpdate=!0,a.bumpMap={type:"t",value:d},a.bumpScale.value=.005),r&&(h=new f["default"].Texture(r),h.needsUpdate=!0,a.specular={type:"c",value:new f["default"].Color(5592405)},a.specularMap={type:"t",value:h}),u&&(v=new f["default"].Texture(u),v.needsUpdate=!0,a.coverMap={type:"t",value:v},g.USE_COVER=!0),s={vertexShader:c,fragmentShader:l,uniforms:a,defines:g,lights:!0,fog:!0};var _=i(this,Object.getPrototypeOf(e).call(this,s));return _.map=!!n,_.bumpMap=!!t,_.specularMap=!!r,_}return u(e,n),e}(f["default"].ShaderMaterial);e["default"]=s},/*!***********************************************!*\
  !*** ./src/materials/shaders/BookMaterial.vs ***!
  \***********************************************/
function(n,e){n.exports="varying vec3 vViewPosition;\r\nvarying vec3 vNormal;\r\n\r\n#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP )\r\n	varying vec2 vUv;\r\n	uniform vec4 offsetRepeat;\r\n#endif\r\n\r\n#ifndef PHONG_PER_PIXEL\r\n	#if MAX_POINT_LIGHTS > 0\r\n		uniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\r\n		uniform float pointLightDistance[ MAX_POINT_LIGHTS ];\r\n		varying vec4 vPointLight[ MAX_POINT_LIGHTS ];\r\n	#endif\r\n\r\n	#if MAX_SPOT_LIGHTS > 0\r\n		uniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\r\n		uniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\r\n		varying vec4 vSpotLight[ MAX_SPOT_LIGHTS ];\r\n	#endif\r\n#endif\r\n\r\n#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP )\r\n	varying vec3 vWorldPosition;\r\n#endif\r\n\r\n#ifdef USE_COLOR\r\n	varying vec3 vColor;\r\n#endif\r\n\r\nvoid main() {\r\n	#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP )\r\n		vUv = uv * offsetRepeat.zw + offsetRepeat.xy;\r\n	#endif\r\n\r\n	#ifdef USE_COLOR\r\n		#ifdef GAMMA_INPUT\r\n			vColor = color * color;\r\n		#else\r\n			vColor = color;\r\n		#endif\r\n	#endif\r\n\r\n	vec3 objectNormal;\r\n	#ifdef USE_SKINNING\r\n		objectNormal = skinnedNormal.xyz;\r\n	#endif\r\n\r\n	#if !defined( USE_SKINNING ) && defined( USE_MORPHNORMALS )\r\n		objectNormal = morphedNormal;\r\n	#endif\r\n\r\n	#if !defined( USE_SKINNING ) && ! defined( USE_MORPHNORMALS )\r\n		objectNormal = normal;\r\n	#endif\r\n\r\n	#ifdef FLIP_SIDED\r\n		objectNormal = -objectNormal;\r\n	#endif\r\n\r\n	vec3 transformedNormal = normalMatrix * objectNormal;\r\n	vNormal = normalize(transformedNormal);\r\n	vec4 mvPosition;\r\n	#ifdef USE_SKINNING\r\n		mvPosition = modelViewMatrix * skinned;\r\n	#endif\r\n\r\n	#if !defined( USE_SKINNING ) && defined( USE_MORPHTARGETS )\r\n		mvPosition = modelViewMatrix * vec4( morphed, 1.0 );\r\n	#endif\r\n\r\n	#if !defined( USE_SKINNING ) && ! defined( USE_MORPHTARGETS )\r\n		mvPosition = modelViewMatrix * vec4( position, 1.0 );\r\n	#endif\r\n\r\n	gl_Position = projectionMatrix * mvPosition;\r\n	vViewPosition = -mvPosition.xyz;\r\n	#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\r\n		#ifdef USE_SKINNING\r\n			vec4 worldPosition = modelMatrix * skinned;\r\n		#endif\r\n\r\n		#if defined( USE_MORPHTARGETS ) && ! defined( USE_SKINNING )\r\n			vec4 worldPosition = modelMatrix * vec4( morphed, 1.0 );\r\n		#endif\r\n\r\n		#if ! defined( USE_MORPHTARGETS ) && ! defined( USE_SKINNING )\r\n			vec4 worldPosition = modelMatrix * vec4( position, 1.0 );\r\n		#endif\r\n	#endif\r\n\r\n	#ifndef PHONG_PER_PIXEL\r\n		#if MAX_POINT_LIGHTS > 0\r\n			for( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\r\n				vec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\r\n				vec3 lVector = lPosition.xyz - mvPosition.xyz;\r\n				float lDistance = 1.0;\r\n\r\n				if ( pointLightDistance[ i ] > 0.0 )\r\n					lDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );\r\n					vPointLight[ i ] = vec4( lVector, lDistance );\r\n			}\r\n		#endif\r\n\r\n		#if MAX_SPOT_LIGHTS > 0\r\n			for( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\r\n				vec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\r\n				vec3 lVector = lPosition.xyz - mvPosition.xyz;\r\n				float lDistance = 1.0;\r\n\r\n				if ( spotLightDistance[ i ] > 0.0 )\r\n					lDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );\r\n					vSpotLight[ i ] = vec4( lVector, lDistance );\r\n			}\r\n		#endif\r\n	#endif\r\n\r\n	#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP )\r\n		vWorldPosition = worldPosition.xyz;\r\n	#endif\r\n}"},/*!***********************************************!*\
  !*** ./src/materials/shaders/BookMaterial.fs ***!
  \***********************************************/
function(n,e){n.exports="uniform vec3 diffuse;\r\nuniform float opacity;\r\nuniform vec3 emissive;\r\nuniform vec3 specular;\r\nuniform float shininess;\r\nuniform sampler2D coverMap;\r\n\r\n#ifdef USE_COLOR\r\n	varying vec3 vColor;\r\n#endif\r\n\r\n#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP )\r\n	varying vec2 vUv;\r\n#endif\r\n\r\n#ifdef USE_MAP\r\n	uniform sampler2D map;\r\n#endif\r\n\r\n#ifdef USE_FOG\r\n	uniform vec3 fogColor;\r\n\r\n	#ifdef FOG_EXP2\r\n		uniform float fogDensity;\r\n	#else\r\n		uniform float fogNear;\r\n		uniform float fogFar;\r\n	#endif\r\n#endif\r\n\r\nuniform vec3 ambientLightColor;\r\n#if MAX_DIR_LIGHTS > 0\r\n	uniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\r\n	uniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\r\n#endif\r\n\r\n#if MAX_HEMI_LIGHTS > 0\r\n	uniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\r\n	uniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\r\n	uniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\r\n#endif\r\n\r\n#if MAX_POINT_LIGHTS > 0\r\n	uniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\r\n	#ifdef PHONG_PER_PIXEL\r\n		uniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\r\n		uniform float pointLightDistance[ MAX_POINT_LIGHTS ];\r\n	#else\r\n		varying vec4 vPointLight[ MAX_POINT_LIGHTS ];\r\n	#endif\r\n#endif\r\n\r\n#if MAX_SPOT_LIGHTS > 0\r\n	uniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\r\n	uniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\r\n	uniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\r\n	uniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\r\n	uniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\r\n	#ifdef PHONG_PER_PIXEL\r\n		uniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\r\n	#else\r\n		varying vec4 vSpotLight[ MAX_SPOT_LIGHTS ];\r\n	#endif\r\n#endif\r\n\r\n#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP )\r\n	varying vec3 vWorldPosition;\r\n#endif\r\n\r\n#ifdef WRAP_AROUND\r\n	uniform vec3 wrapRGB;\r\n#endif\r\n\r\nvarying vec3 vViewPosition;\r\nvarying vec3 vNormal;\r\n#ifdef USE_BUMPMAP\r\n	uniform sampler2D bumpMap;\r\n	uniform float bumpScale;\r\n	vec2 dHdxy_fwd() {\r\n		vec2 dSTdx = dFdx( vUv );\r\n		vec2 dSTdy = dFdy( vUv );\r\n		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;\r\n		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\r\n		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\r\n		return vec2( dBx, dBy );\r\n	}\r\n\r\n	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\r\n		vec3 vSigmaX = dFdx( surf_pos );\r\n		vec3 vSigmaY = dFdy( surf_pos );\r\n		vec3 vN = surf_norm;\r\n		vec3 R1 = cross( vSigmaY, vN );\r\n		vec3 R2 = cross( vN, vSigmaX );\r\n		float fDet = dot( vSigmaX, R1 );\r\n		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\r\n		return normalize( abs( fDet ) * surf_norm - vGrad );\r\n	}\r\n#endif\r\n\r\n#ifdef USE_SPECULARMAP\r\n	uniform sampler2D specularMap;\r\n#endif\r\n\r\nvoid main() {\r\n	vec4 testcolor = vec4(1.0, 1.0, 1.0, 1.0);\r\n	float eps = 0.004;\r\n	vec4 baseColor  = texture2D(map, vUv);\r\n	#ifdef USE_COVER\r\n		vec4 coverColor = texture2D(coverMap, vUv * vec2(2.3, 1.3) - vec2(1.3, 0.3));\r\n		if(vUv.y > 0.23 && (vUv.x > 0.57 || (all(greaterThanEqual(baseColor,testcolor-eps)) && all(lessThanEqual(baseColor,testcolor+eps)))))\r\n			gl_FragColor = coverColor;\r\n		else\r\n			gl_FragColor = baseColor;\r\n	#else\r\n		gl_FragColor = baseColor;\r\n	#endif\r\n\r\n	float specularStrength;\r\n	#ifdef USE_SPECULARMAP\r\n		vec4 texelSpecular = texture2D( specularMap, vUv );\r\n		specularStrength = texelSpecular.r;\r\n	#else\r\n		specularStrength = 1.0;\r\n	#endif\r\n\r\n	vec3 normal = normalize( vNormal );\r\n	vec3 viewPosition = normalize( vViewPosition );\r\n	#ifdef DOUBLE_SIDED\r\n		normal = normal * ( -1.0 + 2.0 * float( gl_FrontFacing ) );\r\n	#endif\r\n\r\n	#ifdef USE_NORMALMAP\r\n		normal = perturbNormal2Arb( -vViewPosition, normal );\r\n	#elif defined( USE_BUMPMAP )\r\n		normal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\r\n	#endif\r\n\r\n	#if MAX_POINT_LIGHTS > 0\r\n		vec3 pointDiffuse  = vec3( 0.0 );\r\n		vec3 pointSpecular = vec3( 0.0 );\r\n\r\n		for ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\r\n			#ifdef PHONG_PER_PIXEL\r\n				vec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\r\n				vec3 lVector = lPosition.xyz + vViewPosition.xyz;\r\n				float lDistance = 1.0;\r\n			\r\n				if ( pointLightDistance[ i ] > 0.0 )\r\n					lDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );\r\n				lVector = normalize( lVector );\r\n			#else\r\n				vec3 lVector = normalize( vPointLight[ i ].xyz );\r\n				float lDistance = vPointLight[ i ].w;\r\n			#endif\r\n\r\n			float dotProduct = dot( normal, lVector );\r\n			#ifdef WRAP_AROUND\r\n				float pointDiffuseWeightFull = max( dotProduct, 0.0 );\r\n				float pointDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\r\n				vec3 pointDiffuseWeight = mix( vec3 ( pointDiffuseWeightFull ), vec3( pointDiffuseWeightHalf ), wrapRGB );\r\n			#else\r\n				float pointDiffuseWeight = max( dotProduct, 0.0 );\r\n			#endif\r\n\r\n			pointDiffuse  += diffuse * pointLightColor[ i ] * pointDiffuseWeight * lDistance;\r\n			vec3 pointHalfVector = normalize( lVector + viewPosition );\r\n			float pointDotNormalHalf = max( dot( normal, pointHalfVector ), 0.0 );\r\n			float pointSpecularWeight = specularStrength * max( pow( pointDotNormalHalf, shininess ), 0.0 );\r\n\r\n			#ifdef PHYSICALLY_BASED_SHADING\r\n				float specularNormalization = ( shininess + 2.0001 ) / 8.0;\r\n				vec3 schlick = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( lVector, pointHalfVector ), 5.0 );\r\n				pointSpecular += schlick * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * lDistance * specularNormalization;\r\n			#else\r\n				pointSpecular += specular * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * lDistance;\r\n			#endif\r\n		}\r\n	#endif\r\n\r\n	#if MAX_SPOT_LIGHTS > 0\r\n		vec3 spotDiffuse  = vec3( 0.0 );\r\n		vec3 spotSpecular = vec3( 0.0 );\r\n		for ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\r\n			#ifdef PHONG_PER_PIXEL\r\n				vec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\r\n				vec3 lVector = lPosition.xyz + vViewPosition.xyz;\r\n				float lDistance = 1.0;\r\n\r\n				if ( spotLightDistance[ i ] > 0.0 )\r\n					lDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );-\r\n\r\n				lVector = normalize( lVector );\r\n			#else\r\n				vec3 lVector = normalize( vSpotLight[ i ].xyz );\r\n				float lDistance = vSpotLight[ i ].w;\r\n			#endif\r\n\r\n			float spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - vWorldPosition ) );\r\n			if ( spotEffect > spotLightAngleCos[ i ] ) {\r\n				spotEffect = max( pow( spotEffect, spotLightExponent[ i ] ), 0.0 );\r\n				float dotProduct = dot( normal, lVector );\r\n\r\n				#ifdef WRAP_AROUND\r\n					float spotDiffuseWeightFull = max( dotProduct, 0.0 );\r\n					float spotDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\r\n					vec3 spotDiffuseWeight = mix( vec3 ( spotDiffuseWeightFull ), vec3( spotDiffuseWeightHalf ), wrapRGB );\r\n				#else\r\n					float spotDiffuseWeight = max( dotProduct, 0.0 );\r\n				#endif\r\n\r\n				spotDiffuse += diffuse * spotLightColor[ i ] * spotDiffuseWeight * lDistance * spotEffect;\r\n				vec3 spotHalfVector = normalize( lVector + viewPosition );\r\n				float spotDotNormalHalf = max( dot( normal, spotHalfVector ), 0.0 );\r\n				float spotSpecularWeight = specularStrength * max( pow( spotDotNormalHalf, shininess ), 0.0 );\r\n				\r\n				#ifdef PHYSICALLY_BASED_SHADING\r\n					float specularNormalization = ( shininess + 2.0001 ) / 8.0;\r\n					vec3 schlick = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( lVector, spotHalfVector ), 5.0 );\r\n					spotSpecular += schlick * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * lDistance * specularNormalization * spotEffect;\r\n				#else\r\n					spotSpecular += specular * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * lDistance * spotEffect;\r\n				#endif\r\n			}\r\n		}\r\n	#endif\r\n\r\n	#if MAX_DIR_LIGHTS > 0\r\n		vec3 dirDiffuse  = vec3( 0.0 );\r\n		vec3 dirSpecular = vec3( 0.0 );\r\n		\r\n		for( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\r\n			vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );\r\n			vec3 dirVector = normalize( lDirection.xyz );\r\n			float dotProduct = dot( normal, dirVector );\r\n			\r\n			#ifdef WRAP_AROUND\r\n				float dirDiffuseWeightFull = max( dotProduct, 0.0 );\r\n				float dirDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\r\n				vec3 dirDiffuseWeight = mix( vec3( dirDiffuseWeightFull ), vec3( dirDiffuseWeightHalf ), wrapRGB );\r\n			#else\r\n				float dirDiffuseWeight = max( dotProduct, 0.0 );\r\n			#endif\r\n\r\n			dirDiffuse  += diffuse * directionalLightColor[ i ] * dirDiffuseWeight;\r\n			vec3 dirHalfVector = normalize( dirVector + viewPosition );\r\n			float dirDotNormalHalf = max( dot( normal, dirHalfVector ), 0.0 );\r\n			float dirSpecularWeight = specularStrength * max( pow( dirDotNormalHalf, shininess ), 0.0 );\r\n			\r\n			#ifdef PHYSICALLY_BASED_SHADING\r\n				float specularNormalization = ( shininess + 2.0001 ) / 8.0;\r\n				vec3 schlick = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( dirVector, dirHalfVector ), 5.0 );\r\n				dirSpecular += schlick * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization;\r\n			#else\r\n				dirSpecular += specular * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight;\r\n			#endif\r\n		}\r\n	#endif\r\n\r\n	#if MAX_HEMI_LIGHTS > 0\r\n		vec3 hemiDiffuse  = vec3( 0.0 );\r\n		vec3 hemiSpecular = vec3( 0.0 );\r\n		\r\n		for( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\r\n			vec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );\r\n			vec3 lVector = normalize( lDirection.xyz );\r\n			float dotProduct = dot( normal, lVector );\r\n			float hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\r\n			vec3 hemiColor = mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\r\n			hemiDiffuse += diffuse * hemiColor;\r\n			vec3 hemiHalfVectorSky = normalize( lVector + viewPosition );\r\n			float hemiDotNormalHalfSky = 0.5 * dot( normal, hemiHalfVectorSky ) + 0.5;\r\n			float hemiSpecularWeightSky = specularStrength * max( pow( hemiDotNormalHalfSky, shininess ), 0.0 );\r\n			vec3 lVectorGround = -lVector;\r\n			vec3 hemiHalfVectorGround = normalize( lVectorGround + viewPosition );\r\n			float hemiDotNormalHalfGround = 0.5 * dot( normal, hemiHalfVectorGround ) + 0.5;\r\n			float hemiSpecularWeightGround = specularStrength * max( pow( hemiDotNormalHalfGround, shininess ), 0.0 );\r\n			\r\n			#ifdef PHYSICALLY_BASED_SHADING\r\n				float dotProductGround = dot( normal, lVectorGround );\r\n				float specularNormalization = ( shininess + 2.0001 ) / 8.0;\r\n				vec3 schlickSky = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( lVector, hemiHalfVectorSky ), 5.0 );\r\n				vec3 schlickGround = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( lVectorGround, hemiHalfVectorGround ), 5.0 );\r\n				hemiSpecular += hemiColor * specularNormalization * ( schlickSky * hemiSpecularWeightSky * max( dotProduct, 0.0 ) + schlickGround * hemiSpecularWeightGround * max( dotProductGround, 0.0 ) );\r\n			#else\r\n				hemiSpecular += specular * hemiColor * ( hemiSpecularWeightSky + hemiSpecularWeightGround ) * hemiDiffuseWeight;\r\n			#endif\r\n		}\r\n	#endif\r\n\r\n	vec3 totalDiffuse = vec3( 0.0 );\r\n	vec3 totalSpecular = vec3( 0.0 );\r\n	#if MAX_DIR_LIGHTS > 0\r\n		totalDiffuse += dirDiffuse;\r\n		totalSpecular += dirSpecular;\r\n	#endif\r\n\r\n	#if MAX_HEMI_LIGHTS > 0\r\n		totalDiffuse += hemiDiffuse;\r\n		totalSpecular += hemiSpecular;\r\n	#endif\r\n\r\n	#if MAX_POINT_LIGHTS > 0\r\n		totalDiffuse += pointDiffuse;\r\n		totalSpecular += pointSpecular;\r\n	#endif\r\n\r\n	#if MAX_SPOT_LIGHTS > 0\r\n		totalDiffuse += spotDiffuse;\r\n		totalSpecular += spotSpecular;\r\n	#endif\r\n\r\n	#ifdef METAL\r\n		gl_FragColor.xyz = gl_FragColor.xyz * ( emissive + totalDiffuse + ambientLightColor + totalSpecular );\r\n	#else\r\n		gl_FragColor.xyz = gl_FragColor.xyz * ( emissive + totalDiffuse + ambientLightColor ) + totalSpecular;\r\n	#endif\r\n\r\n	#ifdef USE_COLOR\r\n		gl_FragColor = gl_FragColor * vec4( vColor, 1.0 );\r\n	#endif\r\n\r\n	#ifdef USE_FOG\r\n		float depth = gl_FragCoord.z / gl_FragCoord.w;\r\n		\r\n		#ifdef FOG_EXP2\r\n			const float LOG2 = 1.442695;\r\n			float fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );\r\n			fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );\r\n		#else\r\n			float fogFactor = smoothstep( fogNear, fogFar, depth );\r\n		#endif\r\n\r\n		gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\r\n	#endif\r\n}"},/*!*************************************!*\
  !*** ./src/models/LibraryObject.js ***!
  \*************************************/
function(n,e,t){"use strict";function r(n){return n&&n.__esModule?n:{"default":n}}function o(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function i(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?n:e}function u(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=t(6),f=r(a),c=function(n){function e(n,t,r){return o(this,e),i(this,Object.getPrototypeOf(e).call(this,n,t,r))}return u(e,n),e}(f["default"]);e["default"]=c},/*!**********************************!*\
  !*** ./src/models/BookObject.js ***!
  \**********************************/
function(n,e,t){"use strict";function r(n){return n&&n.__esModule?n:{"default":n}}function o(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function i(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?n:e}function u(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}var a=function(){function n(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();Object.defineProperty(e,"__esModule",{value:!0});var f=t(6),c=r(f),l="BookObject",s=function(n){function e(n,t,r){return o(this,e),i(this,Object.getPrototypeOf(e).call(this,n,t,r))}return u(e,n),a(e,[{key:"getDto",value:function(){return{id:this.getId(),userId:this.dataObject.userId,pos_x:this.position.x,pos_y:this.position.y,pos_z:this.position.z}}},{key:"setParent",value:function(n){this.parent!=n&&(n?(n.add(this),this.dataObject.shelfId=n.getId(),this.dataObject.sectionId=n.parent.getId()):(this.parent.remove(this),this.dataObject.shelfId=null,this.dataObject.sectionId=null))}},{key:"vbType",get:function(){return l}}],[{key:"TYPE",get:function(){return l}}]),e}(c["default"]);e["default"]=s},/*!*************************************!*\
  !*** ./src/models/SectionObject.js ***!
  \*************************************/
function(n,e,t){"use strict";function r(n){return n&&n.__esModule?n:{"default":n}}function o(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function i(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?n:e}function u(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}var a=function(){function n(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();Object.defineProperty(e,"__esModule",{value:!0});var f=t(6),c=r(f),l=t(16),s=r(l),p="SectionObject",d=function(n){function e(n,t,r){o(this,e);var u=i(this,Object.getPrototypeOf(e).call(this,n,t,r));u.shelves={};for(var a in n.data.shelves)u.shelves[a]=new s["default"](n.data.shelves[a]),u.add(u.shelves[a]);return u}return u(e,n),a(e,[{key:"getDto",value:function(){return{id:this.getId(),userId:this.dataObject.userId,pos_x:this.position.x,pos_y:this.position.y,pos_z:this.position.z,rotation:[this.rotation.x,this.rotation.y,this.rotation.z]}}},{key:"setParent",value:function(n){this.parent!=n&&(n?(n.add(this),this.dataObject.libraryId=n.getId()):(this.parent.remove(this),this.dataObject.libraryId=null))}},{key:"vbType",get:function(){return p}}],[{key:"TYPE",get:function(){return p}}]),e}(c["default"]);e["default"]=d},/*!***********************************!*\
  !*** ./src/models/ShelfObject.js ***!
  \***********************************/
function(n,e,t){"use strict";function r(n){return n&&n.__esModule?n:{"default":n}}function o(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function i(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?n:e}function u(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}var a=function(){function n(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();Object.defineProperty(e,"__esModule",{value:!0});var f=t(2),c=r(f),l=t(6),s=r(l),p="ShelfObject",d=function(n){function e(n){o(this,e);var t=n.size,r=new c["default"].BoxGeometry(t[0],t[1],t[2]);r.computeBoundingBox();var u=i(this,Object.getPrototypeOf(e).call(this,n,r));return u.position.set(n.position[0],n.position[1],n.position[2]),u.size=new c["default"].Vector3(t[0],t[1],t[2]),u.material.transparent=!0,u.material.opacity=0,u}return u(e,n),a(e,[{key:"vbType",get:function(){return p}}],[{key:"TYPE",get:function(){return p}}]),e}(s["default"]);e["default"]=d},/*!***********************!*\
  !*** ./src/camera.js ***!
  \***********************/
function(n,e,t){"use strict";function r(n){return n&&n.__esModule?n:{"default":n}}Object.defineProperty(e,"__esModule",{value:!0});var o=t(2),i=r(o),u=t(18),a=r(u),f={HEIGTH:1.5,object:new a["default"],setParent:function(n){n.add(this.object)},getPosition:function(){return this.object.position}},c=function(n,e){f.camera=new i["default"].PerspectiveCamera(45,n/e,.01,50),f.object.position.set(0,f.HEIGTH,0),f.object.rotation.order="YXZ";var t=new i["default"].PointLight(6706517,1.6,10);t.position.set(0,0,0),f.object.add(t),f.object.add(f.camera)};f.rotate=function(n,e){var t=this.object.rotation.x+1e-4*e||0,r=this.object.rotation.y+1e-4*n||0;1.57>t&&t>-1.57&&(this.object.rotation.x=t),this.object.rotation.y=r},f.go=function(n){var e=this.getVector(),t=this.object.position.clone();t.add(e.multiplyScalar(n)),this.object.move(t)},f.getVector=function(){var n=new i["default"].Vector3(0,0,-1);return n.applyEuler(this.object.rotation)},c(1024,768),e["default"]=f},/*!************************************!*\
  !*** ./src/models/CameraObject.js ***!
  \************************************/
function(n,e,t){"use strict";function r(n){return n&&n.__esModule?n:{"default":n}}function o(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function i(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?n:e}function u(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}var a=function(){function n(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();Object.defineProperty(e,"__esModule",{value:!0});var f=t(2),c=r(f),l=t(6),s=r(l),p=function(n){function e(){o(this,e);var n=new c["default"].Geometry;return n.boundingBox=new c["default"].Box3(new c["default"].Vector3(-.1,-1,-.1),new c["default"].Vector3(.1,1,.1)),i(this,Object.getPrototypeOf(e).call(this,null,n))}return u(e,n),a(e,[{key:"updateBoundingBox",value:function(){var n={x:this.geometry.boundingBox.max.x,y:this.geometry.boundingBox.max.y,z:this.geometry.boundingBox.max.z};this.boundingBox={radius:n,center:this.position}}}]),e}(s["default"]);e["default"]=p},/*!**********************!*\
  !*** ./src/mouse.js ***!
  \**********************/
function(n,e,t){"use strict";function r(n){return n&&n.__esModule?n:{"default":n}}function o(){return window.innerWidth}function i(){return window.innerHeight}function u(){var n=new f["default"].Vector3(p/o()*2-1,2*-(d/i())+1,.5);return n.unproject(l["default"].camera),n.sub(l["default"].getPosition()).normalize()}Object.defineProperty(e,"__esModule",{value:!0}),e.mouse=void 0;var a=t(2),f=r(a),c=t(17),l=r(c),s=e.mouse={},p=null,d=null;s.target=null,s.dX=null,s.dY=null,s.longX=null,s.longY=null,s.getTarget=function(){return this.target},s.down=function(n){n&&(this[n.which]=!0,this.target=n.target,p=n.clientX,d=n.clientY,s.longX=.5*o()-p,s.longY=.5*i()-d)},s.up=function(n){n&&(this[n.which]=!1,this[1]=!1)},s.move=function(n){n&&(this.target=n.target,s.longX=.5*o()-p,s.longY=.5*i()-d,s.dX=n.clientX-p,s.dY=n.clientY-d,p=n.clientX,d=n.clientY)},s.getIntersected=function(n,e,t){var r,o,i,a,c,s,p;if(c=null,r=u(),o=new f["default"].Raycaster,o.set(l["default"].getPosition(),r),i=o.intersectObjects(n,e),t){if(i.length)for(s=0;s<i.length;s++){for(a=i[s],p=t.length-1;p>=0;p--)if(a.object instanceof t[p]){c=a;break}if(c)break}}else c=i;return c}},/*!************************!*\
  !*** ./src/preview.js ***!
  \************************/
function(n,e,t){"use strict";function r(n){return n&&n.__esModule?n:{"default":n}}function o(){a=new c["default"].Object3D,a.position.set(0,0,-.5),a.rotation.y=-2,s["default"].camera.add(a)}function i(n){v=n,d["default"].enable(!v)}function u(){a.children.forEach(function(n){a.remove(n)})}Object.defineProperty(e,"__esModule",{value:!0}),e.preview=void 0;var a,f=t(2),c=r(f),l=t(17),s=r(l),p=t(21),d=r(p),h=e.preview={},v=!1;h.isActive=function(){return v},h.enable=function(n){var e;n&&(i(!0),e=n.clone(),e.position.set(0,0,0),a.add(e))},h.disable=function(){u(),i(!1)},h.rotate=function(n){a.rotation.y+=n?.05*n:0},o()},/*!**************************!*\
  !*** ./src/highlight.js ***!
  \**************************/
function(n,e,t){"use strict";function r(n){return n&&n.__esModule?n:{"default":n}}Object.defineProperty(e,"__esModule",{value:!0});var o,i,u=t(2),a=r(u),f=t(9),c=r(f),l={},s=.5*Math.PI,p=2,d=21811,h=13141,v=function(){var n={map:new a["default"].ImageUtils.loadTexture(t(22)),transparent:!0,side:a["default"].DoubleSide,blending:a["default"].AdditiveBlending,depthTest:!1};n.color=d;var e=new a["default"].MeshBasicMaterial(n);n.color=h;var r=new a["default"].MeshBasicMaterial(n),u=new a["default"].PlaneBufferGeometry(1,1,1);o=new a["default"].Mesh(u,e),o.rotation.x=s,i=new a["default"].Mesh(u,r),i.rotation.x=s},g=function(n,e){if(e){var t=e.geometry.boundingBox.max.x*p,r=e.geometry.boundingBox.max.z*p,o=e.geometry.boundingBox.min.y+c["default"].CLEARANCE;n.position.y=o,n.scale.set(t,r,1),e.add(n),n.visible=!0}else n.visible=!1};l.enable=function(n){i.visible=o.visible=n},l.focus=function(n){g(i,n)},l.select=function(n){g(o,n)},v(),e["default"]=l},/*!**************************!*\
  !*** ./src/img/glow.png ***!
  \**************************/
function(n,e){n.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIGNIUk0AAG2YAABzjgAA9xoAAIWMAAB2QgAA6/gAAC+oAAATzNbpjSIAABLRSURBVHja5F3tVuM6DJQdF/b9nxZoE98/t3uMkDQjJ/1i95wc0sJC6hmNZFmWS+9dnvRfAfcl8bPe6+hfD16je+Znn2OQn5AALPBlJzkyBGBB7q9GhPaiwBeSFLPgSxLkor5av6c49/+8AmSsvJD3iAxZAkRfmfuMOvwzCsACr++t19HPzJIAgW69tt4rAOCHKkJ7cuA9sNEVkQERwZP9CHR0FfX/n4YI7UHgazBmgS4iUhNkYFUgknXr2iZIgWKE/psIwAR1GZCr8X5NKEOWAAzwm0OGbYIId1OD9gCrt6yyAuCrAXZ17r3fw8YC2udvAPzNub++LoAIGzF76K9IAM/qPcmvAfA1eA8RoYLAEAV+kaXr+y14vzi/qw5/rwTTy5uoQXuQ1Rcg6dW5luB71SFBJWYHKNrfHPCja3XeL8ryt8Al3FwN2p3A1/dIzi3AF+N1RAyWBMj3I/DX4H4NCDFat1YFAbFBf1YCzFh8ZOmLce99TxMhcgssASK5X42v+n58XQMijCQQRxFuQoJ2Z/Aj4C2gM1fkIjwV8KS2E5Jvgc1cVf3fokgg91SCdifws8C35H2WBIwCzIB/Ie/rAH6WCIeSoN0YfMsXW35dgzp+bcZr62cRCSw3ECkA8vkW8OPX8X4ZXleHCKvxbN0hwmEkaAeCP95bQV51fLcFNnt5ShCpQCFmAR1Y/xoQAF3LAP5FPdf194tSgnG6uB05O2g3BN+y+sWx+vE6Gfcn5/sNuIPr3/SSRJH/H1VgDQhggX827s8OOS/D840qsBoE3YZg8pD0cbsh+J6fbwD4k3Fvfc9Sg8gVoJkAmgFEfv9iEOAKfBvAv36vBkTwEmhaDQ4hQTvA5zPgexZvAc1cWgmQChzlApD1nxUBzurzjipwJp5tdTDQJJDZmKDtBL+Q4Gur94B/U1/1vUWCxVEBRgHEGLCMAozBngX+9foynpGZqkbB6kiC6cCw3Ql8bfUR8G/G6/HnPFewGAO8JLKBKAuoCeD5/isRvpQKfAXP5ykBWrncTYK2E/ySAN8DnrksJUBxwK0JgPz/aSBBG0jguamSBH8kQZmdIs4qQJTTR+Br635XX/V9RIATYf2RZSECdJADGFXA8/9nQNI6CfwIdg3yBLsVwKre8aw/Aj8C3rq/vrZcwSlh/UeuBUQqcHII8EUEqOzzec+7GT/fnRgnRYCSBD4C/00B++6A/24owJsRA+ggEFl/nVgO3hIqME77Tirw+1LPWYlE1UwVM1o/2K0AklAAC/wR7D8G6BYpLBcw4/v3EgDFAm1QAm39jcxQCmH9UeGpVTgyrQCFBN1TAO33NcB/DCL8cVxBxvqt7B9TFdQJN+BlBbUKZNcqvAJWEb4EPQoKXSK0CekvKsU7I/1/hstTAx0DIOuP/H51MpcoBpCgIGRUgqby/Drpw877PUtH72m5L6wryCpAJaz/BKz/j3FZJHgzgj/P8hfD8vUMJcpiRlvANmNG0A1XMI7BmVyqRusSkeSjKuNtVgGYmn2LBJ4CRMBrErw78u8lfli/X3YQwHMFywD8SIILUZeQCfa8aalVWKrjAaug9NvnbTv9f2T9XtT/B6jAm0EAK/fPBFVI+ksgpZ4rGEG4zr8XQwms0jW2LgEB7n0PBYXQBSDrz6R6UeAXKUBk/VnLZ3cMIxWozpLsWPNXk1afWZKOys/RljSXCJ4LyJRzLSD4ezdcwfuE9bO5/iiqRlMtpAJ9AH/8Wg0SRBtbGPC3iasaJKhOEckPBSgBGSoR/XvBX6QE+rWO/K10L1pEyci+lUMXx2q6YUFVflb2zu5JYMDXpeaeGmwqRWwFgEVEegPWnwn8GpH1i4DXiZ+Tk+vfa/kR2TX4iACbGp9NEYFZf0Dp52ifweqoQDViATNV3AjrL8GCTzT1swjAvB6tX0f9KMef8fneLMDzl8UAqxhfdYEnk+GL8gxR6fn4/cUITvW4/FCBNmH9TPD3BlxAFPBZ0u/N9ZmpXiEtf6YyyuoEgrbAo5QuU4QakcGKB4oxK/jrArLWz2QAvbX+d2Ldn/X7Mz6fJUEHalEMwMdtXkJmHMUAnik8uQwZx7H0fFHBqKcCxXMBGeBRAOit96MsX0v4fUb2M5bfQXDoEaIaMUIJyJXx+VHxyTqkoscchKUClssrjaz6mXUBUanXaQL8qAnEEXJfdpDh+q8K3uVrESCqNXgTf59BGwiwEirwbYbTJN7HX5Pz/6js6+Qs7ETRfqawI2P9KBGEyGAlWYqRntXAL8G072RI/5sqOBkvTYJLkBndvGCwgZw/cgFsDOBV9ehAL6qcycyrBcj2LBk6qSTVIYHl91sg/ZoE52HczuLviRhVoDgBoZsK9i5mR49Xyu3l9L2pHrt0eqtI3yMDmiKWgASjxS+GAlxBPw0W/6as/y0gQVPB4EgCd0rYhG/SxBZ/MLt6TkGlzKICPiboO3qKF1l/lDTylKAoNejDZ90GH74NJFgV2N5eijNYICtBTqK3ifX/mlCCaCk32tRZkgsp5QbAs0Sw1ED/v2oAr6d/bYjox7G8gLFkVkfdYLAJ7tPHAt8ImZ9Z0o0yareyeiYBJEFg6AWnmgijCiwDCU4qwmfHl1WBvySoRPJnJhD0HhjVyBUC+CjouzX40d/yavpQSZ3XHCOzOzpTcl6sVHAJVgCZaaB3732f6eiRKZO+F/BIDaJnqk4aeFSAZWIs2apj0w1UyTV0WoACLCTwLEsZ6X8U+NHyMltWx2ZaM+O6SGJLXAUyxqjAQiiC17iBqeTJFnU8Ewk8VzDTOocBPjuFLtlEUNS6bQEJHa9GLprilScC+QhydDLIrslxjcY2DKgrGbCgrh9MCzdvJc+b8smTS3/WFXjrK2xPpZkWeQWMaYmWUpm6QBZ4xvczkfazgs+kmb3PiGKB7FgzzbPpGABtBUe9fL1t0GxrdzTnfwXpZxUWbbdneyYXEvy/CpDp31+Fb+/qWbt1n5nHlxcBns0jFGKManL6TNdLVLCkyjR0znbxZqZ6md2yr0IGZnbDGhsa9yiu+va1AumKeu9Hffyjkz6iHbEop19eEHgUDAoYnyPG3SVBJdgYRa9eNBs94KPSt89MFm8BCXU+j7CgdiMxzQmQRBWQzMkEevKL5D/72bKHZDHAwyRVTQQqmYcspKxnNm+UFwaeMSzGXcwcnSdIAWbz25J8kEJE/P+KOyiEwZXJcU4lz+rEnDablZst0f5NhChJIsjE2E6dkVgP/BAsg5Gb+U1EKEmjEnL8mHGj8hH1zh+aTfP+VldwxOc+dGxuQYBO/kyf+N6r/zvic/dHEaCD9712ZtZrcf7PXT70nQGXxLgJOX7MuFFkqskP4v3hDHh9gly/wfLZ9/sEiSRJDqgAUb8ckVwLM8Tg3wj4DCFYBUXjzOBGuQDrF/fJKyJXJ5nfXxzkTrqAyB1kxxyqQiUfwHoQr33ZNkGMHgRD/RdZO/O52SPrmXZx0E3UCQnagj+OTtbu/1DEv2dmYI0bGmfUN9BVABTwoSaFHtCWGlg/g2YJr+gGmM/hNYjanHHbM+6ua6hOwOA9GDpKFV1Mt+v+i9wA87mYk0qyR9R7avAD45oM9JiH8RoX9eD+YYmQJ0iEdWKMvBPJZ4zt2zNWMuBjWpZaD6WJwEhUJ6Yzr2T9mUDPGuPVGVemWSScmldyysc2Mor62EWqgObFr6IC2TRvJ609M9YbOSMT7QKy8r8K38cOsdTzV6mkxpP5exT8bWBKtyXHdyXdgDAKwDQujB7uAh50TQSHvyEPwI4vGtsLQQKGCHQMgCJ/r5edvvckbQNJJJQx7E9u/T2wfu8wqm1yXNGMwI0BUPSvH5IFniUCfMgndwXM87Fx1RHjujrGZRpRG94oE9bvPdAleGCvqaFVNeRtXbNAKA8GX0AOPzN9ZsfSIgKrAm4qOMtS6wBl6zj1i+PHtDtAU0IUYD0yfYuk32oNt4l/JP05GFPWFYSutcnPLldMkBIdnGw95Ph9q49dHf6G7rwpEnfq1MpwazXohAuQRCLNGtPz5PiuZJD9lwjNGTj25IpV/NOz9Rm6J4lbm+oy582Zqo7kQIc8lBvLPVsjsRGxVHQcvb5Y4OFMqyXkCjFWP+D4+jRY//VcPWtz4/X3a6CjtqsC1GAvETLAC8jseckdy8KtcbwEZGCt/9tzNxC4jNeasPyvAfTr6yb+iZpow4PVe9dr0xoRgSVDT8p/Jnu6BS5Uk+DLGFdWCVaQDfwxC/DigGwAaIE+nqCdOURZ1IwAKYEIbuzskWGmrpE5ZHIDCR3Lqr8GsL/U63MyEAzrBJrjS/XpU2gaeFYWHhGBaRApDhmsXneWGlhEQGQ40udHZ/9cDOAvjpVbwCMXwPp/8YLAbiiBB/5ikEADPr6Hzv9hdwkxKhB1+fb+Rt8p+9FR8xfg78+B1X85SuC5ALoGoznTqu6owHXaZinAYgCOGkRWkgD64MZRIapwx7pEZJiZ6qFjZUcCIPBHcD+dr54asJlW87M0Z/CyM4HFcAWj1aNj3tFG08UhQgnyA8wRcd57TKQvQW7fS/DoAM+7Pp33mRiAWQTqnguIli61CoynZC9iH5nO9AqMegl4awFWb6M9ewr3TPWiM/+saN/y8Z/BFanAjAvo1jQwqwKjK7gI7mWHzv9hFlnGkzYWw9q9vkOZKSLy+cjyI7+vfb0FcvQ6cgFe9N/BsnpvxIf3ZgQW+GeJ+9sxx7yiCLvK9377XcUBzDmCiAizPt/z+2dl/Z/K+j8U4B8BAb4C68+cLC5RKlgMphfF8qJcQSXARy1MmcTKIj9P3tiG39sl3kvfA9/fD7L80fotv38FFQGvXQCbBbQykabCNsIfemfRWvFAtlegEAUp1w/R1Htjn33rSPfsAVPZ9O5GrOpdnASPBv1jAP8j6f+nloEtBZDAX2olsA5IzrYtReB7M5BmkMA7HydzrOwe2UerepH1fwASfBoKkAn+omDaVACPCBEJrioQNTZEkXoUUetDFdGxM+whk5YrYKd6yPIZ67cI8EEGgNMLQJECMCqgSbApNcge95JdO98cEqwqs+gdMJ0lgLf3LirmQIke7fM/ABG+gvl/FPgJIkEDoBRjMETJ6ipzbcy8mUZUKnWS74clowRTJV0BI/3RXD9aHdWR/ydBAk/6GevfnODPzHwiF9CBVItjUUwDaHb5VFvYSRWYeIdPZl1BNsuHIv6Lkcv/dGYAXgCIkj9e9E/tDJ5RAHHAXw2gozl+tCs2ktZRAS6CTyIrTtKJJcCM3784izufRNbvA0z9mAog2v8jAggot0IzAybtykTV4wHK49m5VxVAaw1HEWBLzPcvwUreJ8j6IevPBH1o0QsSIHIF22TOnS2V1ito40HKl6H2gDmPkF1yZgo7MjWRX0H279O518vAhy7+7FUAr5NFttQqU3Y+Hp9uHaTcEioQBaXs1i3L+jPr+5/B0q8F/HnHgs9uBUBqsA15+O0AJfAs6+QQAJ2dSx+gSGT9GOtnCBBdqAKY3W4Pgc8SoDtlV5IEv5PgWwQ4/68GTbgTyW9NgKiM21v29ap9MqXfU40gjlaAoubJlSBBdrv5xZD+s+EClh1xgJcIyvr/VfyybavO7xzM73W0j8DfZsHPEmAvCZhtZ4gAlv/3TiVHRSisAqDNm6jOj7mYLV+Hgz9DAK/sqhMk6MQgo+ia9f8zM4GZGQCKA6KNHZdA6i+CGz9sckArnRkCWAFhcUgQ7etHbqDJz13FZ8L3o6wgWpG0VGpNqADaIHsRblOHtXHWAr/Ljj5KswRgSVCIGABJrc76nQnw0caTWReQ2dfHXpbFM211doO/lwBRomhcj/fUoAred2BZugYeBX8oCGSXpZlUNeqVsIq/TX6me8ruDmp7CYCmiFtgbZ6ljZU+uvR8BJvx+0w62EtUMY0x0ZYvdI96/vUjpnq3JgAigSZCVOipiTCu8y8DEZYd4LMKMEsC9poB/lDwjyQAQwKWCOMAa3Ct1xVE/UeuBXizgqjD1yZ8h89Un98jQDuSAEzG0KrQ7Sp41AWeq9iVxt59lbg0LEOAHhSEeJs/vQ6f0XQuquS9Gfi3IEBWCUYSlIAIdVAEtvKYAT9bkr7J/kbOKLhDFn9oH6RbEAAtI1uKoDd3aCKMJGCOS/cqkiWhACJxy3zUQb0TEh/V8N2lJV7p/eaNtUrwdewAwhyUHJ1Ozh5cjZau2eNxUAd01tI3QupvBtI9CCASn2mbPTW7EJY+C/4sCTpp4V3yAd5NAWpyn386W+hty4pqCsfvbyTwciABhCRCJwK6bDdUeXUFyKiBSP7kbBb0rAuYIQNzfJ480uofoQCRGrCziYgUIvhw5VkFEIk3iiLL7sTvvDvwj1QARhFYVWDBzoAvJGAsKRiwHwbCMxBghggyCfoMAbJkkFcA/hkJwBIBgZsBnukTyBAhC/bTDPp/AwBoU4h2iD1EhgAAAABJRU5ErkJggg=="},/*!*************************!*\
  !*** ./src/selector.js ***!
  \*************************/
function(n,e,t){"use strict";function r(n){return n&&n.__esModule?n:{"default":n}}function o(n){var e;return n.isEmpty()||(e=i(n)?_["default"].getShelf(n.parentId,n.id):u(n)?_["default"].getBook(n.id):a(n)?_["default"].getSection(n.id):null),e}function i(n){return n.type===s["default"].TYPE}function u(n){return n.type===d["default"].TYPE}function a(n){return n.type===v["default"].TYPE}Object.defineProperty(e,"__esModule",{value:!0}),e.selector=void 0;var f=t(24),c=r(f),l=t(16),s=r(l),p=t(14),d=r(p),h=t(15),v=r(h),g=t(9),_=r(g),y=t(21),m=r(y),b=t(20),w=e.selector={},A=new c["default"],S=new c["default"];w.placing=!1,w.getSelectedId=function(){return A.id},w.focus=function(n){var e;n.equals(S)||(S=n,S.isEmpty()||(e=w.getFocusedObject(),m["default"].focus(e)))},w.selectFocused=function(){w.select(S)},w.select=function(n){var e=o(n);w.unselect(),A=n,m["default"].select(e),m["default"].focus(null),w.placing=!1},w.unselect=function(){A.isEmpty()||(m["default"].select(null),A=new c["default"]),b.preview.disable()},w.getSelectedObject=function(){return o(A)},w.getFocusedObject=function(){return o(S)},w.isSelectedEditable=function(){return w.isSelectedBook()||w.isSelectedSection()},w.isBookSelected=function(n){return u(A)&&A.id===n},w.isSelectedShelf=function(){return i(A)},w.isSelectedBook=function(){return u(A)},w.isSelectedSection=function(){return a(A)}},/*!************************************!*\
  !*** ./src/models/SelectorMeta.js ***!
  \************************************/
function(n,e){"use strict";function t(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function n(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function n(e){t(this,n),e&&(this.id=e.getId(),this.parentId=e.parent.getId(),this.type=e.getType())}return r(n,[{key:"isEmpty",value:function(){return!this.id}},{key:"equals",value:function(n){return!(!n||n.id!==this.id||n.parentId!==this.parentId||n.type!==this.type)}}]),n}();e["default"]=o},/*!***************************!*\
  !*** ./src/navigation.js ***!
  \***************************/
function(n,e,t){"use strict";function r(n){return n&&n.__esModule?n:{"default":n}}Object.defineProperty(e,"__esModule",{value:!0}),e.navigation=void 0;var o=t(17),i=r(o),u=e.navigation={};u.BUTTONS_ROTATE_SPEED=100,u.BUTTONS_GO_SPEED=.02;var a={forward:!1,backward:!1,left:!1,right:!1,up:!1,down:!1};u.goStop=function(){a.forward=!1,a.backward=!1,a.left=!1,a.right=!1,a.up=!1,a.down=!1},u.goForward=function(){a.forward=!0},u.goBackward=function(){a.backward=!0},u.goLeft=function(){a.left=!0},u.goRight=function(){a.right=!0},u.goUp=function(){a.up=!0},u.goDown=function(){a.down=!0},u.update=function(){a.forward?i["default"].go(u.BUTTONS_GO_SPEED):a.backward?i["default"].go(-u.BUTTONS_GO_SPEED):a.left?i["default"].rotate(u.BUTTONS_ROTATE_SPEED,0):a.right?i["default"].rotate(-u.BUTTONS_ROTATE_SPEED,0):a.up?i["default"].rotate(0,u.BUTTONS_ROTATE_SPEED):a.down&&i["default"].rotate(0,-u.BUTTONS_ROTATE_SPEED)}},/*!***************************************!*\
  !*** ./src/models/SelectorMetaDto.js ***!
  \***************************************/
function(n,e,t){"use strict";function r(n){return n&&n.__esModule?n:{"default":n}}function o(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function i(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?n:e}function u(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=t(24),f=r(a),c=function(n){function e(n,t,r){o(this,e);var u=i(this,Object.getPrototypeOf(e).call(this));return u.type=n,u.id=t,u.parentId=r,u}return u(e,n),e}(f["default"]);e["default"]=c}])});
//# sourceMappingURL=bundle.js.map